import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as o}from"./index.BR1w_nJd.js";import{c as C}from"./utils.fNskMoFt.js";import{u as M}from"./useTranslation.C-NthtKk.js";import{S as f}from"./sparkles.7_zDP0It.js";import{T as S}from"./triangle-alert.DB91qjcz.js";import{C as m}from"./copy.C0lunkjJ.js";import{c as T}from"./createLucideIcon._FvKnKwF.js";import{L as E}from"./loader-circle.m7cZJHvs.js";import"./_commonjsHelpers.D6-XlEtG.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M15.033 9.44a.647.647 0 0 1 0 1.12l-4.065 2.352a.645.645 0 0 1-.968-.56V7.648a.645.645 0 0 1 .967-.56z",key:"vbtd3f"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}],["rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",key:"x3v2xh"}]],y=T("monitor-play",F);function D(){const{t:s}=M(),[i,j]=o.useState(""),[n,w]=o.useState("professional"),[c,v]=o.useState("article"),[d,x]=o.useState(""),[p,u]=o.useState(!1),[t,l]=o.useState("checking"),[h,g]=o.useState("");o.useEffect(()=>{b()},[]);const b=async()=>{if(!window.ai||!window.ai.languageModel){l("unavailable");return}try{const a=await window.ai.languageModel.capabilities();a.available==="readily"?l("ready"):a.available==="after-download"?l("downloading"):l("unavailable")}catch{l("unavailable")}},N=async()=>{if(!i||t!=="ready")return;u(!0),x(""),g("");let a;try{a=await window.ai.languageModel.create({systemPrompt:`You are a helpful AI writing assistant. user wants a ${n} ${c}.`});const r=`Write a ${n} ${c} about "${i}". Make it engaging and well-structured.`,k=await a.prompt(r);x(k)}catch(r){console.error("Generation error:",r),g(r.message||"Failed to generate content using offline model.")}finally{a&&a.destroy(),u(!1)}},_=()=>{navigator.clipboard.writeText(d)};return e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 rounded-2xl bg-gray-50 border border-gray-200 space-y-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5 text-purple-600"}),s("tools_ui.ai_writer_tool.title")]}),e.jsx("span",{className:C("text-xs font-medium px-2 py-1 rounded-full border",t==="ready"?"bg-green-50 text-green-700 border-green-200":t==="unavailable"?"bg-red-50 text-red-700 border-red-200":"bg-yellow-50 text-yellow-700 border-yellow-200"),children:s(t==="ready"?"tools_ui.common.model_ready":t==="checking"?"tools_ui.common.checking_cpu":t==="downloading"?"tools_ui.common.model_downloading":"tools_ui.common.browser_unsupported")})]}),t==="unavailable"?e.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl space-y-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(S,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s("tools_ui.ai_writer_tool.offline_not_detected")}),e.jsxs("p",{children:["Status: ",window.ai?window.ai.languageModel?"Model capabilities check failed":"'languageModel' API missing":"'window.ai' is undefined (Flag disabled/Old Chrome)"]})]}),e.jsxs("div",{className:"bg-white/50 p-3 rounded-lg border border-amber-100",children:[e.jsx("p",{className:"font-bold mb-2",children:s("tools_ui.ai_writer_tool.troubleshooting")}),e.jsxs("ol",{className:"list-decimal pl-4 space-y-2 opacity-90",children:[e.jsx("li",{children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{children:[e.jsx("b",{children:"Flags:"}),' Set to "Enabled":']}),e.jsx("div",{className:"flex items-center gap-1 bg-white px-2 py-0.5 rounded border border-gray-200 text-[10px] font-mono select-all",children:"chrome://flags/#prompt-api-for-gemini-nano"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText("chrome://flags/#prompt-api-for-gemini-nano"),className:"p-1 hover:bg-black/5 rounded transition-colors",title:"Copy Link",children:e.jsx(m,{className:"w-3 h-3"})})]})}),e.jsxs("li",{children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsxs("span",{children:[e.jsx("b",{children:"Model Download:"})," Check update at:"]}),e.jsx("div",{className:"flex items-center gap-1 bg-white px-2 py-0.5 rounded border border-gray-200 text-[10px] font-mono select-all",children:"chrome://components"}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText("chrome://components"),className:"p-1 hover:bg-black/5 rounded transition-colors",title:"Copy Link",children:e.jsx(m,{className:"w-3 h-3"})})]}),e.jsxs("ul",{className:"list-disc pl-4 text-xs space-y-0.5 mt-1",children:[e.jsxs("li",{children:["Find ",e.jsx("b",{children:"Optimization Guide On Device Model"})]}),e.jsx("li",{children:'Click "Check for update"'}),e.jsxs("li",{children:["Wait until Version is not ",e.jsx("code",{children:"0.0.0.0"})]})]})]}),e.jsx("li",{className:"font-medium text-amber-900",children:"Restart Chrome completely after these steps."})]})]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-3 py-1.5 bg-amber-100 hover:bg-amber-200 text-amber-900 rounded-lg text-xs font-semibold transition-colors",children:[e.jsx(y,{className:"w-3 h-3"})," ",s("tools_ui.common.recheck")]})]})]})}):e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:s("tools_ui.ai_writer_tool.topic_label")}),e.jsx("textarea",{value:i,onChange:a=>j(a.target.value),placeholder:s("tools_ui.ai_writer_tool.topic_placeholder"),rows:4,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-3 text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all resize-none shadow-sm placeholder:text-gray-400"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:s("tools_ui.ai_writer_tool.type_label")}),e.jsx("div",{className:"relative",children:e.jsxs("select",{value:c,onChange:a=>v(a.target.value),className:"w-full bg-white border border-gray-200 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500 appearance-none shadow-sm cursor-pointer",children:[e.jsx("option",{value:"article",children:"Article"}),e.jsx("option",{value:"blog post",children:"Blog Post"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"social media caption",children:"Social Caption"}),e.jsx("option",{value:"story",children:"Story"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:s("tools_ui.ai_writer_tool.tone_label")}),e.jsx("div",{className:"relative",children:e.jsxs("select",{value:n,onChange:a=>w(a.target.value),className:"w-full bg-white border border-gray-200 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500 appearance-none shadow-sm cursor-pointer",children:[e.jsx("option",{value:"professional",children:"Professional"}),e.jsx("option",{value:"casual",children:"Casual"}),e.jsx("option",{value:"enthusiastic",children:"Enthusiastic"}),e.jsx("option",{value:"informative",children:"Informative"}),e.jsx("option",{value:"funny",children:"Funny"})]})})]})]}),h&&e.jsx("div",{className:"p-3 bg-red-50 text-red-700 text-sm rounded-lg border border-red-100",children:h}),e.jsx("button",{onClick:N,disabled:p||!i||t!=="ready",className:"w-full bg-linear-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white py-4 rounded-xl font-bold transition-all shadow-lg shadow-purple-500/20 flex items-center justify-center gap-2 transform active:scale-95 disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed",children:p?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"animate-spin w-5 h-5"})," ",s("tools_ui.ai_writer_tool.generating")]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-5 h-5"})," ",s("tools_ui.ai_writer_tool.generate_button")]})})]})]})}),e.jsx("div",{className:"h-full min-h-125 flex flex-col",children:d?e.jsxs("div",{className:"flex-1 bg-white border border-gray-200 rounded-2xl overflow-hidden flex flex-col animate-in fade-in shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between bg-gray-50",children:[e.jsx("span",{className:"text-sm font-medium text-gray-500",children:s("tools_ui.common.offline_result")}),e.jsxs("button",{onClick:_,className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1.5 transition-colors bg-blue-50 px-3 py-1.5 rounded-full",children:[e.jsx(m,{className:"w-3.5 h-3.5"})," ",s("tools_ui.common.copy")]})]}),e.jsx("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar bg-white",children:e.jsx("div",{className:"prose prose-gray max-w-none prose-headings:text-gray-900 prose-p:text-gray-600 prose-strong:text-gray-900",children:d.split(`
`).map((a,r)=>e.jsx("p",{className:"mb-4",children:a},r))})})]}):e.jsx("div",{className:"flex-1 bg-gray-50 border-2 border-dashed border-gray-200 rounded-2xl flex items-center justify-center text-gray-400 p-8 text-center",children:e.jsxs("div",{children:[e.jsx(f,{className:"w-12 h-12 mx-auto mb-4 opacity-50 text-gray-300"}),e.jsx("p",{className:"font-medium text-gray-500",children:s("tools_ui.common.generated_content_placeholder")}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:s("tools_ui.common.runs_locally")})]})})})]})}export{D as default};
