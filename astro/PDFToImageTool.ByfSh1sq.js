import{_ as P}from"./preload-helper.CJ8dg2r8.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as d}from"./index.BR1w_nJd.js";import{J as F}from"./jszip.min.CL8lVgXJ.js";import{F as C}from"./FileSaver.min.D-v3scGK.js";import{F as S}from"./fileUploader.D55Ta1Pr.js";import{I as D}from"./image.13c9b-WX.js";import{L as _}from"./loader-circle.m7cZJHvs.js";import{A as v}from"./arrow-down.BWPH-g_Y.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./_commonjs-dynamic-modules.TDtrdbi3.js";import"./index.BUxk5OiF.js";import"./createLucideIcon._FvKnKwF.js";import"./utils.fNskMoFt.js";function V(){const[r,x]=d.useState(null),[a,m]=d.useState([]),[h,f]=d.useState(!1),[u,g]=d.useState(0),y=t=>{t.length>0&&(x(t[0]),m([]),g(0))},b=async()=>{if(r){f(!0),g(0),m([]);try{const t=await r.arrayBuffer(),s=await P(()=>import("./pdf.OfKI3oAY.js"),[]);s.GlobalWorkerOptions.workerSrc="/pdf.worker.min.mjs";const o=await s.getDocument(t).promise,i=o.numPages,n=[];for(let l=1;l<=i;l++){const j=await o.getPage(l),p=j.getViewport({scale:2}),c=document.createElement("canvas"),w=c.getContext("2d");c.height=p.height,c.width=p.width,w&&(await j.render({canvasContext:w,viewport:p}).promise,n.push(c.toDataURL("image/jpeg",.8))),g(Math.round(l/i*100)),m([...n])}}catch(t){console.error("Error converting PDF to images:",t),alert("Failed to convert PDF. Please try again.")}finally{f(!1)}}},N=async()=>{if(a.length===0)return;const t=new F;a.forEach((o,i)=>{const n=o.split(",")[1];t.file(`page-${i+1}.jpg`,n,{base64:!0})});const s=await t.generateAsync({type:"blob"});C.saveAs(s,"converted-images.zip")};return e.jsx("div",{className:"max-w-4xl mx-auto",children:r?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(r.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx("button",{onClick:()=>x(null),className:"text-sm text-gray-500 hover:text-gray-900 font-medium",children:"Change File"})]}),!a.length&&!h&&e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:b,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-semibold shadow-lg shadow-blue-500/20 transition-all flex items-center gap-2",children:"Start Conversion"})}),h&&e.jsxs("div",{className:"text-center space-y-3 py-8",children:[e.jsx(_,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto"}),e.jsxs("p",{className:"text-gray-600",children:["Converting page ",Math.ceil(u/100*(a.length||1)),"..."]}),e.jsx("div",{className:"w-full max-w-md mx-auto h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${u}%`}})})]}),a.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Converted Pages (",a.length,")"]}),e.jsxs("button",{onClick:N,className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4"})," Download All (ZIP)"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:a.map((t,s)=>e.jsxs("div",{className:"relative group aspect-[1/1.4] rounded-lg overflow-hidden border border-gray-200 bg-gray-50 shadow-sm",children:[e.jsx("img",{src:t,alt:`Page ${s+1}`,className:"w-full h-full object-contain"}),e.jsx("a",{href:t,download:`page-${s+1}.jpg`,className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:e.jsx(v,{className:"w-8 h-8 text-white filter drop-shadow-md"})})]},s))})]})]}):e.jsx(S,{onFilesSelected:y,accept:{"application/pdf":[".pdf"]}})})}export{V as default};
