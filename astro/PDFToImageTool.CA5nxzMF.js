import{r as e,j as s,F as a}from"./vendor.Ml7xHclh.js";import{J as t}from"./pdf-vendor.5vxXXNST.js";import{F as l}from"./fileUploader.B1Dwo65Z.js";import{u as r,f as i,g as n}from"./pdf.BjHsYDCh.js";import{P as c}from"./ProcessButton.mPdpvfTx.js";import{I as o,v as d,L as m}from"./lucide-icons.CJY1ueNI.js";import"./utils.Ceoo1Swf.js";function g(){const{files:g,addFiles:x,clearFiles:h,isProcessing:p,processingProgress:f,processingMessage:j,setProcessingState:u}=r({multiple:!1}),[y,v]=e.useState([]),N=g[0]||null,b=g.length>0?g[g.length-1]:null;return s.jsx("div",{className:"max-w-4xl mx-auto",children:b?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50 border border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:s.jsx(o,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:b.name}),s.jsx("p",{className:"text-xs text-gray-500",children:i(b.size)})]})]}),s.jsx("button",{onClick:()=>{h(),v([])},className:"text-sm text-gray-500 hover:text-gray-900 font-medium",children:"Change File"})]}),!y.length&&!p&&s.jsx("div",{className:"flex justify-center",children:s.jsx(c,{onClick:async()=>{if(N){v([]),u(!0,"Converting to images...",0);try{const e=await n(N,(e,s)=>{u(!0,`Converting page ${e}/${s}...`,Math.round(e/s*100))},2);v(e)}catch(e){alert("Failed to convert PDF. Please try again.")}finally{u(!1)}}},className:"w-full max-w-xs",isProcessing:!1,icon:d,processingMessage:"Start Conversion",children:"Start Conversion"})}),p&&s.jsxs("div",{className:"text-center space-y-3 py-8",children:[s.jsx(m,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto"}),s.jsx("p",{className:"text-gray-600",children:j}),s.jsx("div",{className:"w-full max-w-md mx-auto h-2 bg-gray-100 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${f}%`}})})]}),y.length>0&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Converted Pages (",y.length,")"]}),s.jsxs("button",{onClick:async()=>{if(0===y.length)return;const e=new t;y.forEach((s,a)=>{const t=s.split(",")[1];e.file(`page-${a+1}.jpg`,t,{base64:!0})});const s=await e.generateAsync({type:"blob"});a.saveAs(s,"converted-images.zip")},className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[s.jsx(d,{className:"w-4 h-4"})," Download All (ZIP)"]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.map((e,a)=>s.jsxs("div",{className:"relative group aspect-[1/1.4] rounded-lg overflow-hidden border border-gray-200 bg-gray-50 shadow-sm",children:[s.jsx("img",{src:e,alt:`Page ${a+1}`,className:"w-full h-full object-contain"}),s.jsx("a",{href:e,download:`page-${a+1}.jpg`,className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:s.jsx(d,{className:"w-8 h-8 text-white filter drop-shadow-md"})})]},a))})]})]}):s.jsx(l,{onFilesSelected:e=>{e.length>0&&(h(),v([]),x(e))},accept:{"application/pdf":[".pdf"]}})})}export{g as default};
