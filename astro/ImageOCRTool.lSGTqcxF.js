import{u as e,r as t,j as a,s}from"./vendor.Ml7xHclh.js";import{F as r}from"./fileUploader.B1Dwo65Z.js";import"./i18n.BsxyfPkU.js";import{n as o,L as i,o as l,C as n}from"./lucide-icons.CJY1ueNI.js";import"./utils.Ceoo1Swf.js";function c(){const{t:c}=e(),[d,x]=t.useState(null),[g,m]=t.useState(""),[u,p]=t.useState(!1),[h,b]=t.useState(0),[j,f]=t.useState("eng"),[y,v]=t.useState(!1);return a.jsx("div",{className:"max-w-5xl mx-auto",children:d?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-gray-100 shadow-sm flex flex-wrap gap-4 items-center justify-between",children:[a.jsxs("button",{onClick:()=>window.location.reload(),className:"text-sm text-gray-600 hover:text-gray-900 font-medium",children:["← ",c("tools_ui.image_blur.upload_new")]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(o,{size:16,className:"text-gray-400"}),a.jsxs("select",{value:j,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"eng",children:"English"}),a.jsx("option",{value:"spa",children:"Spanish"}),a.jsx("option",{value:"fra",children:"French"}),a.jsx("option",{value:"deu",children:"German"}),a.jsx("option",{value:"chi_sim",children:"Chinese (Simplified)"}),a.jsx("option",{value:"jpn",children:"Japanese"}),a.jsx("option",{value:"kor",children:"Korean"}),a.jsx("option",{value:"ara",children:"Arabic"}),a.jsx("option",{value:"hin",children:"Hindi"})]})]}),a.jsx("button",{onClick:async()=>{if(d){p(!0),b(0);try{const e=await s.createWorker(j,1,{logger:e=>{"recognizing text"===e.status&&b(Math.round(100*e.progress))}}),{data:{text:t}}=await e.recognize(d);m(t),await e.terminate()}catch(e){alert(c("tools_ui.image_ocr.error_alert"))}finally{p(!1)}}},disabled:u,className:"bg-green-600 text-white px-6 py-2 rounded-xl font-bold hover:bg-green-700 transition-colors shadow-lg disabled:opacity-50 flex items-center gap-2",children:u?a.jsxs(a.Fragment,{children:[a.jsx(i,{className:"animate-spin w-5 h-5"}),h>0?`${h}%`:c("tools_ui.image_ocr.loading")]}):a.jsxs(a.Fragment,{children:[a.jsx(l,{size:18}),c("tools_ui.image_ocr.extract_button")]})})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-sm",children:[a.jsx("div",{className:"bg-gray-50 border-b border-gray-200 p-3 px-4",children:a.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-wide",children:c("tools_ui.image_ocr.image_label")})}),a.jsx("div",{className:"p-6 bg-gray-50 flex items-center justify-center min-h-125",children:a.jsx("img",{src:d,alt:"Upload",className:"max-w-full max-h-125 object-contain rounded-lg border border-gray-200 bg-white"})})]}),a.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 overflow-hidden shadow-sm flex flex-col",children:[a.jsxs("div",{className:"bg-green-50 border-b border-green-200 p-3 px-4 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-bold text-green-600 uppercase tracking-wide",children:c("tools_ui.image_ocr.extracted_label")}),g&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(g),v(!0),setTimeout(()=>v(!1),2e3)}catch(e){}},className:"text-xs flex items-center gap-1 px-3 py-1.5 rounded-lg transition-colors font-semibold "+(y?"bg-green-100 text-green-700":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"),children:y?c("tools_ui.image_base64.copied"):a.jsxs(a.Fragment,{children:[a.jsx(n,{size:12})," ",c("tools_ui.image_base64.copy")]})}),a.jsxs("button",{onClick:()=>{const e=new Blob([g],{type:"text/plain"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download="extracted-text.txt",a.click(),URL.revokeObjectURL(t)},className:"text-xs flex items-center gap-1 px-3 py-1.5 rounded-lg bg-white text-gray-600 hover:bg-gray-50 border border-gray-200 font-semibold",children:[a.jsx(l,{size:12})," ",c("tools_ui.image_ocr.save_txt")]})]})]}),a.jsx("textarea",{readOnly:!0,value:g,placeholder:c("tools_ui.image_ocr.placeholder"),className:"flex-1 w-full p-6 text-sm text-gray-700 focus:outline-none resize-none min-h-125 font-mono leading-relaxed"}),g&&a.jsxs("div",{className:"border-t border-gray-100 p-3 bg-gray-50 text-xs text-gray-500 text-center",children:[g.split(/\s+/).length," ",c("tools_ui.image_ocr.words")," • ",g.length," ",c("tools_ui.image_ocr.chars")]})]})]})]}):a.jsx(r,{onFilesSelected:e=>{if(e&&e.length>0){const t=new FileReader;t.onload=()=>{x(t.result),m("")},t.readAsDataURL(e[0])}},accept:{"image/*":[".jpg",".jpeg",".png",".webp",".gif"]},multiple:!1,title:c("tools_ui.image_ocr.upload_title")})})}export{c as default};
