import{_ as E}from"./preload-helper.BlTxHScW.js";import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.BR1w_nJd.js";import{P as T,a as A}from"./ProcessButton.BKm5qs89.js";import{F as M}from"./fileUploader.D55Ta1Pr.js";import{F as R}from"./FileSaver.min.D-v3scGK.js";import{u as q,f as m,i as I}from"./pdf.BWFj-41E.js";import{F as U}from"./file-text.DcW9pNJ8.js";import{X as $}from"./x.DlPzfmHM.js";import{M as V}from"./minimize-2.CWS4dmHY.js";import{C as G}from"./circle-check-big.Vx2QpGaZ.js";import{A as H}from"./arrow-down.BWPH-g_Y.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./utils.fNskMoFt.js";import"./loader-circle.m7cZJHvs.js";import"./createLucideIcon._FvKnKwF.js";import"./index.BUxk5OiF.js";function de(){const{files:b,addFiles:w,clearFiles:j,isProcessing:y,processingProgress:v,processingMessage:N,setProcessingState:l}=q({multiple:!1}),[d,P]=u.useState(.7),[r,n]=u.useState(null),t=b[0]||null,F=s=>{w(s),n(null)},C=async()=>{if(t){l(!0,"Compressing...");try{const s=await E(()=>import("./pdf.OfKI3oAY.js"),[]);await I();const k=await t.arrayBuffer(),p=await s.getDocument({data:k}).promise,x=p.numPages,c=await A.create();for(let o=1;o<=x;o++){const f=await p.getPage(o),a=f.getViewport({scale:1.5}),i=document.createElement("canvas"),h=i.getContext("2d");if(i.height=a.height,i.width=a.width,h){await f.render({canvasContext:h,viewport:a}).promise;const B=i.toDataURL("image/jpeg",d),_=await fetch(B).then(S=>S.arrayBuffer()),L=await c.embedJpg(_);c.addPage([a.width,a.height]).drawImage(L,{x:0,y:0,width:a.width,height:a.height})}l(!0,"Compressing...",Math.round(o/x*100))}const z=await c.save(),g=new Blob([z],{type:"application/pdf"});n({blob:g,size:g.size})}catch(s){console.error("Compression failed:",s),alert(`Compression failed: ${s.message}`)}finally{l(!1)}}},D=()=>{r&&R.saveAs(r.blob,`compressed-${t?.name||"document.pdf"}`)};return e.jsx("div",{className:"max-w-4xl mx-auto space-y-8",children:t?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 block",children:t.name}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",m(t.size),")"]})]})]}),e.jsx("button",{onClick:()=>{j(),n(null)},className:"p-1.5 hover:bg-gray-200 rounded-full text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx($,{className:"w-4 h-4"})})]}),r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(G,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Compression Complete!"}),e.jsxs("p",{className:"text-gray-500 mb-8",children:["Your file has been compressed from ",e.jsx("span",{className:"font-medium text-gray-900",children:m(t.size)})," to ",e.jsx("span",{className:"font-bold text-green-600",children:m(r.size)})]}),e.jsxs("button",{onClick:D,className:"px-8 py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-bold shadow-lg shadow-green-500/20 flex items-center gap-2 mx-auto transition-all",children:[e.jsx(H,{className:"w-5 h-5"}),"Download Compressed PDF"]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Compression Level"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Extreme",value:.4,desc:"Low quality, smallest size"},{label:"Recommended",value:.7,desc:"Good quality, good compression"},{label:"High Quality",value:.9,desc:"Best quality, larger size"}].map(s=>e.jsxs("button",{onClick:()=>P(s.value),className:`p-4 rounded-xl border-2 text-left transition-all ${d===s.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,children:[e.jsx("div",{className:"font-bold text-gray-900",children:s.label}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.desc})]},s.label))})]}),e.jsx(T,{onClick:C,isProcessing:y,progress:v,processingMessage:N,icon:V,children:"Compress PDF"})]})]}):e.jsx(M,{onFilesSelected:F,accept:{"application/pdf":[".pdf"]}})})}export{de as default};
