import{j as z}from"./jsx-runtime.D_zvdyIk.js";import{r as Ae}from"./index.BR1w_nJd.js";import{F as st}from"./fileUploader.D55Ta1Pr.js";import{F as at}from"./FileSaver.min.D-v3scGK.js";import"./i18n.0Kt4fEA7.js";import{u as lt}from"./useTranslation.C-NthtKk.js";import{C as ft}from"./check.DST6BrT9.js";import{A as ct}from"./arrow-down.BWPH-g_Y.js";import{L as ut}from"./loader-circle.m7cZJHvs.js";import{F as dt}from"./file-image.DDynCQJM.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./index.BUxk5OiF.js";import"./createLucideIcon._FvKnKwF.js";import"./utils.fNskMoFt.js";function ht(C,j){return j.forEach((function(O){O&&typeof O!="string"&&!Array.isArray(O)&&Object.keys(O).forEach((function(d){if(d!=="default"&&!(d in C)){var e=Object.getOwnPropertyDescriptor(O,d);Object.defineProperty(C,d,e.get?e:{enumerable:!0,get:function(){return O[d]}})}}))})),Object.freeze(C)}function $e(C,j){return new Promise((function(O,d){let e;return gt(C).then((function(t){try{return e=t,O(new Blob([j.slice(0,2),e,j.slice(2)],{type:"image/jpeg"}))}catch(u){return d(u)}}),d)}))}const gt=C=>new Promise(((j,O)=>{const d=new FileReader;d.addEventListener("load",(({target:{result:e}})=>{const t=new DataView(e);let u=0;if(t.getUint16(u)!==65496)return O("not a valid JPEG");for(u+=2;;){const a=t.getUint16(u);if(a===65498)break;const m=t.getUint16(u+2);if(a===65505&&t.getUint32(u+4)===1165519206){const y=u+10;let n;switch(t.getUint16(y)){case 18761:n=!0;break;case 19789:n=!1;break;default:return O("TIFF header contains invalid endian")}if(t.getUint16(y+2,n)!==42)return O("TIFF header contains invalid version");const i=t.getUint32(y+4,n),r=y+i+2+12*t.getUint16(y+i,n);for(let s=y+i+2;s<r;s+=12)if(t.getUint16(s,n)==274){if(t.getUint16(s+2,n)!==3)return O("Orientation data type is invalid");if(t.getUint32(s+4,n)!==1)return O("Orientation data count is invalid");t.setUint16(s+8,1,n);break}return j(e.slice(u,u+2+m))}u+=2+m}return j(new Blob)})),d.readAsArrayBuffer(C)}));var Te={},mt={get exports(){return Te},set exports(C){Te=C}};(function(C){var j,O,d={};mt.exports=d,d.parse=function(e,t){for(var u=d.bin.readUshort,a=d.bin.readUint,m=0,y={},n=new Uint8Array(e),i=n.length-4;a(n,i)!=101010256;)i--;m=i,m+=4;var r=u(n,m+=4);u(n,m+=2);var s=a(n,m+=2),g=a(n,m+=4);m+=4,m=g;for(var x=0;x<r;x++){a(n,m),m+=4,m+=4,m+=4,a(n,m+=4),s=a(n,m+=4);var I=a(n,m+=4),v=u(n,m+=4),P=u(n,m+2),R=u(n,m+4);m+=6;var E=a(n,m+=8);m+=4,m+=v+P+R,d._readLocal(n,E,y,s,I,t)}return y},d._readLocal=function(e,t,u,a,m,y){var n=d.bin.readUshort,i=d.bin.readUint;i(e,t),n(e,t+=4),n(e,t+=2);var r=n(e,t+=2);i(e,t+=2),i(e,t+=4),t+=4;var s=n(e,t+=8),g=n(e,t+=2);t+=2;var x=d.bin.readUTF8(e,t,s);if(t+=s,t+=g,y)u[x]={size:m,csize:a};else{var I=new Uint8Array(e.buffer,t);if(r==0)u[x]=new Uint8Array(I.buffer.slice(t,t+a));else{if(r!=8)throw"unknown compression method: "+r;var v=new Uint8Array(m);d.inflateRaw(I,v),u[x]=v}}},d.inflateRaw=function(e,t){return d.F.inflate(e,t)},d.inflate=function(e,t){return e[0],e[1],d.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},d.deflate=function(e,t){t==null&&(t={level:6});var u=0,a=new Uint8Array(50+Math.floor(1.1*e.length));a[u]=120,a[u+1]=156,u+=2,u=d.F.deflateRaw(e,a,u,t.level);var m=d.adler(e,0,e.length);return a[u+0]=m>>>24&255,a[u+1]=m>>>16&255,a[u+2]=m>>>8&255,a[u+3]=m>>>0&255,new Uint8Array(a.buffer,0,u+4)},d.deflateRaw=function(e,t){t==null&&(t={level:6});var u=new Uint8Array(50+Math.floor(1.1*e.length)),a=d.F.deflateRaw(e,u,a,t.level);return new Uint8Array(u.buffer,0,a)},d.encode=function(e,t){t==null&&(t=!1);var u=0,a=d.bin.writeUint,m=d.bin.writeUshort,y={};for(var n in e){var i=!d._noNeed(n)&&!t,r=e[n],s=d.crc.crc(r,0,r.length);y[n]={cpr:i,usize:r.length,crc:s,file:i?d.deflateRaw(r):r}}for(var n in y)u+=y[n].file.length+30+46+2*d.bin.sizeUTF8(n);u+=22;var g=new Uint8Array(u),x=0,I=[];for(var n in y){var v=y[n];I.push(x),x=d._writeHeader(g,x,n,v,0)}var P=0,R=x;for(var n in y)v=y[n],I.push(x),x=d._writeHeader(g,x,n,v,1,I[P++]);var E=x-R;return a(g,x,101010256),x+=4,m(g,x+=4,P),m(g,x+=2,P),a(g,x+=2,E),a(g,x+=4,R),x+=4,x+=2,g.buffer},d._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},d._writeHeader=function(e,t,u,a,m,y){var n=d.bin.writeUint,i=d.bin.writeUshort,r=a.file;return n(e,t,m==0?67324752:33639248),t+=4,m==1&&(t+=2),i(e,t,20),i(e,t+=2,0),i(e,t+=2,a.cpr?8:0),n(e,t+=2,0),n(e,t+=4,a.crc),n(e,t+=4,r.length),n(e,t+=4,a.usize),i(e,t+=4,d.bin.sizeUTF8(u)),i(e,t+=2,0),t+=2,m==1&&(t+=2,t+=2,n(e,t+=6,y),t+=4),t+=d.bin.writeUTF8(e,t,u),m==0&&(e.set(r,t),t+=r.length),t},d.crc={table:(function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var u=t,a=0;a<8;a++)1&u?u=3988292384^u>>>1:u>>>=1;e[t]=u}return e})(),update:function(e,t,u,a){for(var m=0;m<a;m++)e=d.crc.table[255&(e^t[u+m])]^e>>>8;return e},crc:function(e,t,u){return 4294967295^d.crc.update(4294967295,e,t,u)}},d.adler=function(e,t,u){for(var a=1,m=0,y=t,n=t+u;y<n;){for(var i=Math.min(y+5552,n);y<i;)m+=a+=e[y++];a%=65521,m%=65521}return m<<16|a},d.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,u){e[t]=255&u,e[t+1]=u>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,u){e[t]=255&u,e[t+1]=u>>8&255,e[t+2]=u>>16&255,e[t+3]=u>>24&255},readASCII:function(e,t,u){for(var a="",m=0;m<u;m++)a+=String.fromCharCode(e[t+m]);return a},writeASCII:function(e,t,u){for(var a=0;a<u.length;a++)e[t+a]=u.charCodeAt(a)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,u){for(var a,m="",y=0;y<u;y++)m+="%"+d.bin.pad(e[t+y].toString(16));try{a=decodeURIComponent(m)}catch{return d.bin.readASCII(e,t,u)}return a},writeUTF8:function(e,t,u){for(var a=u.length,m=0,y=0;y<a;y++){var n=u.charCodeAt(y);if((4294967168&n)==0)e[t+m]=n,m++;else if((4294965248&n)==0)e[t+m]=192|n>>6,e[t+m+1]=128|n>>0&63,m+=2;else if((4294901760&n)==0)e[t+m]=224|n>>12,e[t+m+1]=128|n>>6&63,e[t+m+2]=128|n>>0&63,m+=3;else{if((4292870144&n)!=0)throw"e";e[t+m]=240|n>>18,e[t+m+1]=128|n>>12&63,e[t+m+2]=128|n>>6&63,e[t+m+3]=128|n>>0&63,m+=4}}return m},sizeUTF8:function(e){for(var t=e.length,u=0,a=0;a<t;a++){var m=e.charCodeAt(a);if((4294967168&m)==0)u++;else if((4294965248&m)==0)u+=2;else if((4294901760&m)==0)u+=3;else{if((4292870144&m)!=0)throw"e";u+=4}}return u}},d.F={},d.F.deflateRaw=function(e,t,u,a){var m=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],y=d.F.U,n=d.F._goodIndex;d.F._hash;var i=d.F._putsE,r=0,s=u<<3,g=0,x=e.length;if(a==0){for(;r<x;)i(t,s,r+(A=Math.min(65535,x-r))==x?1:0),s=d.F._copyExact(e,r,A,t,s+8),r+=A;return s>>>3}var I=y.lits,v=y.strt,P=y.prev,R=0,E=0,T=0,h=0,M=0,l=0;for(x>2&&(v[l=d.F._hash(e,0)]=0),r=0;r<x;r++){if(M=l,r+1<x-2){l=d.F._hash(e,r+1);var f=r+1&32767;P[f]=v[l],v[l]=f}if(g<=r){(R>14e3||E>26697)&&x-r>100&&(g<r&&(I[R]=r-g,R+=2,g=r),s=d.F._writeBlock(r==x-1||g==x?1:0,I,R,h,e,T,r-T,t,s),R=E=h=0,T=r);var p=0;r<x-2&&(p=d.F._bestMatch(e,r,P,M,Math.min(m[2],x-r),m[3]));var A=p>>>16,w=65535&p;if(p!=0){w=65535&p;var _=n(A=p>>>16,y.of0);y.lhst[257+_]++;var b=n(w,y.df0);y.dhst[b]++,h+=y.exb[_]+y.dxb[b],I[R]=A<<23|r-g,I[R+1]=w<<16|_<<8|b,R+=2,g=r+A}else y.lhst[e[r]]++;E++}}for(T==r&&e.length!=0||(g<r&&(I[R]=r-g,R+=2,g=r),s=d.F._writeBlock(1,I,R,h,e,T,r-T,t,s),R=0,E=0,R=E=h=0,T=r);(7&s)!=0;)s++;return s>>>3},d.F._bestMatch=function(e,t,u,a,m,y){var n=32767&t,i=u[n],r=n-i+32768&32767;if(i==n||a!=d.F._hash(e,t-r))return 0;for(var s=0,g=0,x=Math.min(32767,t);r<=x&&--y!=0&&i!=n;){if(s==0||e[t+s]==e[t+s-r]){var I=d.F._howLong(e,t,r);if(I>s){if(g=r,(s=I)>=m)break;r+2<I&&(I=r+2);for(var v=0,P=0;P<I-2;P++){var R=t-r+P+32768&32767,E=R-u[R]+32768&32767;E>v&&(v=E,i=R)}}}r+=(n=i)-(i=u[n])+32768&32767}return s<<16|g},d.F._howLong=function(e,t,u){if(e[t]!=e[t-u]||e[t+1]!=e[t+1-u]||e[t+2]!=e[t+2-u])return 0;var a=t,m=Math.min(e.length,t+258);for(t+=3;t<m&&e[t]==e[t-u];)t++;return t-a},d.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},d.saved=0,d.F._writeBlock=function(e,t,u,a,m,y,n,i,r){var s,g,x,I,v,P,R,E,T,h=d.F.U,M=d.F._putsF,l=d.F._putsE;h.lhst[256]++,g=(s=d.F.getTrees())[0],x=s[1],I=s[2],v=s[3],P=s[4],R=s[5],E=s[6],T=s[7];var f=32+((r+3&7)==0?0:8-(r+3&7))+(n<<3),p=a+d.F.contSize(h.fltree,h.lhst)+d.F.contSize(h.fdtree,h.dhst),A=a+d.F.contSize(h.ltree,h.lhst)+d.F.contSize(h.dtree,h.dhst);A+=14+3*R+d.F.contSize(h.itree,h.ihst)+(2*h.ihst[16]+3*h.ihst[17]+7*h.ihst[18]);for(var w=0;w<286;w++)h.lhst[w]=0;for(w=0;w<30;w++)h.dhst[w]=0;for(w=0;w<19;w++)h.ihst[w]=0;var _=f<p&&f<A?0:p<A?1:2;if(M(i,r,e),M(i,r+1,_),r+=3,_==0){for(;(7&r)!=0;)r++;r=d.F._copyExact(m,y,n,i,r)}else{var b,F;if(_==1&&(b=h.fltree,F=h.fdtree),_==2){d.F.makeCodes(h.ltree,g),d.F.revCodes(h.ltree,g),d.F.makeCodes(h.dtree,x),d.F.revCodes(h.dtree,x),d.F.makeCodes(h.itree,I),d.F.revCodes(h.itree,I),b=h.ltree,F=h.dtree,l(i,r,v-257),l(i,r+=5,P-1),l(i,r+=5,R-4),r+=4;for(var c=0;c<R;c++)l(i,r+3*c,h.itree[1+(h.ordr[c]<<1)]);r+=3*R,r=d.F._codeTiny(E,h.itree,i,r),r=d.F._codeTiny(T,h.itree,i,r)}for(var o=y,N=0;N<u;N+=2){for(var U=t[N],k=U>>>23,Q=o+(8388607&U);o<Q;)r=d.F._writeLit(m[o++],b,i,r);if(k!=0){var L=t[N+1],D=L>>16,H=L>>8&255,S=255&L;l(i,r=d.F._writeLit(257+H,b,i,r),k-h.of0[H]),r+=h.exb[H],M(i,r=d.F._writeLit(S,F,i,r),D-h.df0[S]),r+=h.dxb[S],o+=k}}r=d.F._writeLit(256,b,i,r)}return r},d.F._copyExact=function(e,t,u,a,m){var y=m>>>3;return a[y]=u,a[y+1]=u>>>8,a[y+2]=255-a[y],a[y+3]=255-a[y+1],y+=4,a.set(new Uint8Array(e.buffer,t,u),y),m+(u+4<<3)},d.F.getTrees=function(){for(var e=d.F.U,t=d.F._hufTree(e.lhst,e.ltree,15),u=d.F._hufTree(e.dhst,e.dtree,15),a=[],m=d.F._lenCodes(e.ltree,a),y=[],n=d.F._lenCodes(e.dtree,y),i=0;i<a.length;i+=2)e.ihst[a[i]]++;for(i=0;i<y.length;i+=2)e.ihst[y[i]]++;for(var r=d.F._hufTree(e.ihst,e.itree,7),s=19;s>4&&e.itree[1+(e.ordr[s-1]<<1)]==0;)s--;return[t,u,r,m,n,s,a,y]},d.F.getSecond=function(e){for(var t=[],u=0;u<e.length;u+=2)t.push(e[u+1]);return t},d.F.nonZero=function(e){for(var t="",u=0;u<e.length;u+=2)e[u+1]!=0&&(t+=(u>>1)+",");return t},d.F.contSize=function(e,t){for(var u=0,a=0;a<t.length;a++)u+=t[a]*e[1+(a<<1)];return u},d.F._codeTiny=function(e,t,u,a){for(var m=0;m<e.length;m+=2){var y=e[m],n=e[m+1];a=d.F._writeLit(y,t,u,a);var i=y==16?2:y==17?3:7;y>15&&(d.F._putsE(u,a,n,i),a+=i)}return a},d.F._lenCodes=function(e,t){for(var u=e.length;u!=2&&e[u-1]==0;)u-=2;for(var a=0;a<u;a+=2){var m=e[a+1],y=a+3<u?e[a+3]:-1,n=a+5<u?e[a+5]:-1,i=a==0?-1:e[a-1];if(m==0&&y==m&&n==m){for(var r=a+5;r+2<u&&e[r+2]==m;)r+=2;(s=Math.min(r+1-a>>>1,138))<11?t.push(17,s-3):t.push(18,s-11),a+=2*s-2}else if(m==i&&y==m&&n==m){for(r=a+5;r+2<u&&e[r+2]==m;)r+=2;var s=Math.min(r+1-a>>>1,6);t.push(16,s-3),a+=2*s-2}else t.push(m,0)}return u>>>1},d.F._hufTree=function(e,t,u){var a=[],m=e.length,y=t.length,n=0;for(n=0;n<y;n+=2)t[n]=0,t[n+1]=0;for(n=0;n<m;n++)e[n]!=0&&a.push({lit:n,f:e[n]});var i=a.length,r=a.slice(0);if(i==0)return 0;if(i==1){var s=a[0].lit;return r=s==0?1:0,t[1+(s<<1)]=1,t[1+(r<<1)]=1,1}a.sort((function(E,T){return E.f-T.f}));var g=a[0],x=a[1],I=0,v=1,P=2;for(a[0]={lit:-1,f:g.f+x.f,l:g,r:x,d:0};v!=i-1;)g=I!=v&&(P==i||a[I].f<a[P].f)?a[I++]:a[P++],x=I!=v&&(P==i||a[I].f<a[P].f)?a[I++]:a[P++],a[v++]={lit:-1,f:g.f+x.f,l:g,r:x};var R=d.F.setDepth(a[v-1],0);for(R>u&&(d.F.restrictDepth(r,u,R),R=u),n=0;n<i;n++)t[1+(r[n].lit<<1)]=r[n].d;return R},d.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(d.F.setDepth(e.l,t+1),d.F.setDepth(e.r,t+1))},d.F.restrictDepth=function(e,t,u){var a=0,m=1<<u-t,y=0;for(e.sort((function(i,r){return r.d==i.d?i.f-r.f:r.d-i.d})),a=0;a<e.length&&e[a].d>t;a++){var n=e[a].d;e[a].d=t,y+=m-(1<<u-n)}for(y>>>=u-t;y>0;)(n=e[a].d)<t?(e[a].d++,y-=1<<t-n-1):a++;for(;a>=0;a--)e[a].d==t&&y<0&&(e[a].d--,y++);y!=0&&console.log("debt left")},d.F._goodIndex=function(e,t){var u=0;return t[16|u]<=e&&(u|=16),t[8|u]<=e&&(u|=8),t[4|u]<=e&&(u|=4),t[2|u]<=e&&(u|=2),t[1|u]<=e&&(u|=1),u},d.F._writeLit=function(e,t,u,a){return d.F._putsF(u,a,t[e<<1]),a+t[1+(e<<1)]},d.F.inflate=function(e,t){var u=Uint8Array;if(e[0]==3&&e[1]==0)return t||new u(0);var a=d.F,m=a._bitsF,y=a._bitsE,n=a._decodeTiny,i=a.makeCodes,r=a.codes2map,s=a._get17,g=a.U,x=t==null;x&&(t=new u(e.length>>>2<<3));for(var I,v,P=0,R=0,E=0,T=0,h=0,M=0,l=0,f=0,p=0;P==0;)if(P=m(e,p,1),R=m(e,p+1,2),p+=3,R!=0){if(x&&(t=d.F._check(t,f+(1<<17))),R==1&&(I=g.flmap,v=g.fdmap,M=511,l=31),R==2){E=y(e,p,5)+257,T=y(e,p+5,5)+1,h=y(e,p+10,4)+4,p+=14;for(var A=0;A<38;A+=2)g.itree[A]=0,g.itree[A+1]=0;var w=1;for(A=0;A<h;A++){var _=y(e,p+3*A,3);g.itree[1+(g.ordr[A]<<1)]=_,_>w&&(w=_)}p+=3*h,i(g.itree,w),r(g.itree,w,g.imap),I=g.lmap,v=g.dmap,p=n(g.imap,(1<<w)-1,E+T,e,p,g.ttree);var b=a._copyOut(g.ttree,0,E,g.ltree);M=(1<<b)-1;var F=a._copyOut(g.ttree,E,T,g.dtree);l=(1<<F)-1,i(g.ltree,b),r(g.ltree,b,I),i(g.dtree,F),r(g.dtree,F,v)}for(;;){var c=I[s(e,p)&M];p+=15&c;var o=c>>>4;if(!(o>>>8))t[f++]=o;else{if(o==256)break;var N=f+o-254;if(o>264){var U=g.ldef[o-257];N=f+(U>>>3)+y(e,p,7&U),p+=7&U}var k=v[s(e,p)&l];p+=15&k;var Q=k>>>4,L=g.ddef[Q],D=(L>>>4)+m(e,p,15&L);for(p+=15&L,x&&(t=d.F._check(t,f+(1<<17)));f<N;)t[f]=t[f++-D],t[f]=t[f++-D],t[f]=t[f++-D],t[f]=t[f++-D];f=N}}}else{(7&p)!=0&&(p+=8-(7&p));var H=4+(p>>>3),S=e[H-4]|e[H-3]<<8;x&&(t=d.F._check(t,f+S)),t.set(new u(e.buffer,e.byteOffset+H,S),f),p=H+S<<3,f+=S}return t.length==f?t:t.slice(0,f)},d.F._check=function(e,t){var u=e.length;if(t<=u)return e;var a=new Uint8Array(Math.max(u<<1,t));return a.set(e,0),a},d.F._decodeTiny=function(e,t,u,a,m,y){for(var n=d.F._bitsE,i=d.F._get17,r=0;r<u;){var s=e[i(a,m)&t];m+=15&s;var g=s>>>4;if(g<=15)y[r]=g,r++;else{var x=0,I=0;g==16?(I=3+n(a,m,2),m+=2,x=y[r-1]):g==17?(I=3+n(a,m,3),m+=3):g==18&&(I=11+n(a,m,7),m+=7);for(var v=r+I;r<v;)y[r]=x,r++}}return m},d.F._copyOut=function(e,t,u,a){for(var m=0,y=0,n=a.length>>>1;y<u;){var i=e[y+t];a[y<<1]=0,a[1+(y<<1)]=i,i>m&&(m=i),y++}for(;y<n;)a[y<<1]=0,a[1+(y<<1)]=0,y++;return m},d.F.makeCodes=function(e,t){for(var u,a,m,y,n=d.F.U,i=e.length,r=n.bl_count,s=0;s<=t;s++)r[s]=0;for(s=1;s<i;s+=2)r[e[s]]++;var g=n.next_code;for(u=0,r[0]=0,a=1;a<=t;a++)u=u+r[a-1]<<1,g[a]=u;for(m=0;m<i;m+=2)(y=e[m+1])!=0&&(e[m]=g[y],g[y]++)},d.F.codes2map=function(e,t,u){for(var a=e.length,m=d.F.U.rev15,y=0;y<a;y+=2)if(e[y+1]!=0)for(var n=y>>1,i=e[y+1],r=n<<4|i,s=t-i,g=e[y]<<s,x=g+(1<<s);g!=x;)u[m[g]>>>15-t]=r,g++},d.F.revCodes=function(e,t){for(var u=d.F.U.rev15,a=15-t,m=0;m<e.length;m+=2){var y=e[m]<<t-e[m+1];e[m]=u[y]>>>a}},d.F._putsE=function(e,t,u){u<<=7&t;var a=t>>>3;e[a]|=u,e[a+1]|=u>>>8},d.F._putsF=function(e,t,u){u<<=7&t;var a=t>>>3;e[a]|=u,e[a+1]|=u>>>8,e[a+2]|=u>>>16},d.F._bitsE=function(e,t,u){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<u)-1},d.F._bitsF=function(e,t,u){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<u)-1},d.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},d.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},d.F.U=(j=Uint16Array,O=Uint32Array,{next_code:new j(16),bl_count:new j(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new j(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new O(32),flmap:new j(512),fltree:[],fdmap:new j(32),fdtree:[],lmap:new j(32768),ltree:[],ttree:[],dmap:new j(32768),dtree:[],imap:new j(512),itree:[],rev15:new j(32768),lhst:new O(286),dhst:new O(30),ihst:new O(19),lits:new O(15e3),strt:new j(65536),prev:new j(32768)}),(function(){for(var e=d.F.U,t=0;t<32768;t++){var u=t;u=(4278255360&(u=(4042322160&(u=(3435973836&(u=(2863311530&u)>>>1|(1431655765&u)<<1))>>>2|(858993459&u)<<2))>>>4|(252645135&u)<<4))>>>8|(16711935&u)<<8,e.rev15[t]=(u>>>16|u<<16)>>>17}function a(m,y,n){for(;y--!=0;)m.push(0,n)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];a(e.fltree,144,8),a(e.fltree,112,9),a(e.fltree,24,7),a(e.fltree,8,8),d.F.makeCodes(e.fltree,9),d.F.codes2map(e.fltree,9,e.flmap),d.F.revCodes(e.fltree,9),a(e.fdtree,32,5),d.F.makeCodes(e.fdtree,5),d.F.codes2map(e.fdtree,5,e.fdmap),d.F.revCodes(e.fdtree,5),a(e.itree,19,0),a(e.ltree,286,0),a(e.dtree,30,0),a(e.ttree,320,0)})()})();var pt=ht({__proto__:null,default:Te},[Te]);const he=(function(){var C={nextZero(n,i){for(;n[i]!=0;)i++;return i},readUshort:(n,i)=>n[i]<<8|n[i+1],writeUshort(n,i,r){n[i]=r>>8&255,n[i+1]=255&r},readUint:(n,i)=>16777216*n[i]+(n[i+1]<<16|n[i+2]<<8|n[i+3]),writeUint(n,i,r){n[i]=r>>24&255,n[i+1]=r>>16&255,n[i+2]=r>>8&255,n[i+3]=255&r},readASCII(n,i,r){let s="";for(let g=0;g<r;g++)s+=String.fromCharCode(n[i+g]);return s},writeASCII(n,i,r){for(let s=0;s<r.length;s++)n[i+s]=r.charCodeAt(s)},readBytes(n,i,r){const s=[];for(let g=0;g<r;g++)s.push(n[i+g]);return s},pad:n=>n.length<2?`0${n}`:n,readUTF8(n,i,r){let s,g="";for(let x=0;x<r;x++)g+=`%${C.pad(n[i+x].toString(16))}`;try{s=decodeURIComponent(g)}catch{return C.readASCII(n,i,r)}return s}};function j(n,i,r,s){const g=i*r,x=t(s),I=Math.ceil(i*x/8),v=new Uint8Array(4*g),P=new Uint32Array(v.buffer),{ctype:R}=s,{depth:E}=s,T=C.readUshort;if(R==6){const U=g<<2;if(E==8)for(var h=0;h<U;h+=4)v[h]=n[h],v[h+1]=n[h+1],v[h+2]=n[h+2],v[h+3]=n[h+3];if(E==16)for(h=0;h<U;h++)v[h]=n[h<<1]}else if(R==2){const U=s.tabs.tRNS;if(U==null){if(E==8)for(h=0;h<g;h++){var M=3*h;P[h]=255<<24|n[M+2]<<16|n[M+1]<<8|n[M]}if(E==16)for(h=0;h<g;h++)M=6*h,P[h]=255<<24|n[M+4]<<16|n[M+2]<<8|n[M]}else{var l=U[0];const k=U[1],Q=U[2];if(E==8)for(h=0;h<g;h++){var f=h<<2;M=3*h,P[h]=255<<24|n[M+2]<<16|n[M+1]<<8|n[M],n[M]==l&&n[M+1]==k&&n[M+2]==Q&&(v[f+3]=0)}if(E==16)for(h=0;h<g;h++)f=h<<2,M=6*h,P[h]=255<<24|n[M+4]<<16|n[M+2]<<8|n[M],T(n,M)==l&&T(n,M+2)==k&&T(n,M+4)==Q&&(v[f+3]=0)}}else if(R==3){const U=s.tabs.PLTE,k=s.tabs.tRNS,Q=k?k.length:0;if(E==1)for(var p=0;p<r;p++){var A=p*I,w=p*i;for(h=0;h<i;h++){f=w+h<<2;var _=3*(b=n[A+(h>>3)]>>7-((7&h)<<0)&1);v[f]=U[_],v[f+1]=U[_+1],v[f+2]=U[_+2],v[f+3]=b<Q?k[b]:255}}if(E==2)for(p=0;p<r;p++)for(A=p*I,w=p*i,h=0;h<i;h++)f=w+h<<2,_=3*(b=n[A+(h>>2)]>>6-((3&h)<<1)&3),v[f]=U[_],v[f+1]=U[_+1],v[f+2]=U[_+2],v[f+3]=b<Q?k[b]:255;if(E==4)for(p=0;p<r;p++)for(A=p*I,w=p*i,h=0;h<i;h++)f=w+h<<2,_=3*(b=n[A+(h>>1)]>>4-((1&h)<<2)&15),v[f]=U[_],v[f+1]=U[_+1],v[f+2]=U[_+2],v[f+3]=b<Q?k[b]:255;if(E==8)for(h=0;h<g;h++){var b;f=h<<2,_=3*(b=n[h]),v[f]=U[_],v[f+1]=U[_+1],v[f+2]=U[_+2],v[f+3]=b<Q?k[b]:255}}else if(R==4){if(E==8)for(h=0;h<g;h++){f=h<<2;var F=n[c=h<<1];v[f]=F,v[f+1]=F,v[f+2]=F,v[f+3]=n[c+1]}if(E==16)for(h=0;h<g;h++){var c;f=h<<2,F=n[c=h<<2],v[f]=F,v[f+1]=F,v[f+2]=F,v[f+3]=n[c+2]}}else if(R==0)for(l=s.tabs.tRNS?s.tabs.tRNS:-1,p=0;p<r;p++){const U=p*I,k=p*i;if(E==1)for(var o=0;o<i;o++){var N=(F=255*(n[U+(o>>>3)]>>>7-(7&o)&1))==255*l?0:255;P[k+o]=N<<24|F<<16|F<<8|F}else if(E==2)for(o=0;o<i;o++)N=(F=85*(n[U+(o>>>2)]>>>6-((3&o)<<1)&3))==85*l?0:255,P[k+o]=N<<24|F<<16|F<<8|F;else if(E==4)for(o=0;o<i;o++)N=(F=17*(n[U+(o>>>1)]>>>4-((1&o)<<2)&15))==17*l?0:255,P[k+o]=N<<24|F<<16|F<<8|F;else if(E==8)for(o=0;o<i;o++)N=(F=n[U+o])==l?0:255,P[k+o]=N<<24|F<<16|F<<8|F;else if(E==16)for(o=0;o<i;o++)F=n[U+(o<<1)],N=T(n,U+(o<<1))==l?0:255,P[k+o]=N<<24|F<<16|F<<8|F}return v}function O(n,i,r,s){const g=t(n),x=Math.ceil(r*g/8),I=new Uint8Array((x+1+n.interlace)*s);return i=n.tabs.CgBI?e(i,I):d(i,I),n.interlace==0?i=u(i,n,0,r,s):n.interlace==1&&(i=(function(P,R){const E=R.width,T=R.height,h=t(R),M=h>>3,l=Math.ceil(E*h/8),f=new Uint8Array(T*l);let p=0;const A=[0,0,4,0,2,0,1],w=[0,4,0,2,0,1,0],_=[8,8,8,4,4,2,2],b=[8,8,4,4,2,2,1];let F=0;for(;F<7;){const o=_[F],N=b[F];let U=0,k=0,Q=A[F];for(;Q<T;)Q+=o,k++;let L=w[F];for(;L<E;)L+=N,U++;const D=Math.ceil(U*h/8);u(P,R,p,U,k);let H=0,S=A[F];for(;S<T;){let B=w[F],Z=p+H*D<<3;for(;B<E;){var c;if(h==1&&(c=(c=P[Z>>3])>>7-(7&Z)&1,f[S*l+(B>>3)]|=c<<7-((7&B)<<0)),h==2&&(c=(c=P[Z>>3])>>6-(7&Z)&3,f[S*l+(B>>2)]|=c<<6-((3&B)<<1)),h==4&&(c=(c=P[Z>>3])>>4-(7&Z)&15,f[S*l+(B>>1)]|=c<<4-((1&B)<<2)),h>=8){const q=S*l+B*M;for(let W=0;W<M;W++)f[q+W]=P[(Z>>3)+W]}Z+=h,B+=N}H++,S+=o}U*k!=0&&(p+=k*(1+D)),F+=1}return f})(i,n)),i}function d(n,i){return e(new Uint8Array(n.buffer,2,n.length-6),i)}var e=(function(){const n={H:{}};return n.H.N=function(i,r){const s=Uint8Array;let g,x,I=0,v=0,P=0,R=0,E=0,T=0,h=0,M=0,l=0;if(i[0]==3&&i[1]==0)return r||new s(0);const f=n.H,p=f.b,A=f.e,w=f.R,_=f.n,b=f.A,F=f.Z,c=f.m,o=r==null;for(o&&(r=new s(i.length>>>2<<5));I==0;)if(I=p(i,l,1),v=p(i,l+1,2),l+=3,v!=0){if(o&&(r=n.H.W(r,M+(1<<17))),v==1&&(g=c.J,x=c.h,T=511,h=31),v==2){P=A(i,l,5)+257,R=A(i,l+5,5)+1,E=A(i,l+10,4)+4,l+=14;let U=1;for(var N=0;N<38;N+=2)c.Q[N]=0,c.Q[N+1]=0;for(N=0;N<E;N++){const L=A(i,l+3*N,3);c.Q[1+(c.X[N]<<1)]=L,L>U&&(U=L)}l+=3*E,_(c.Q,U),b(c.Q,U,c.u),g=c.w,x=c.d,l=w(c.u,(1<<U)-1,P+R,i,l,c.v);const k=f.V(c.v,0,P,c.C);T=(1<<k)-1;const Q=f.V(c.v,P,R,c.D);h=(1<<Q)-1,_(c.C,k),b(c.C,k,g),_(c.D,Q),b(c.D,Q,x)}for(;;){const U=g[F(i,l)&T];l+=15&U;const k=U>>>4;if(!(k>>>8))r[M++]=k;else{if(k==256)break;{let Q=M+k-254;if(k>264){const B=c.q[k-257];Q=M+(B>>>3)+A(i,l,7&B),l+=7&B}const L=x[F(i,l)&h];l+=15&L;const D=L>>>4,H=c.c[D],S=(H>>>4)+p(i,l,15&H);for(l+=15&H;M<Q;)r[M]=r[M++-S],r[M]=r[M++-S],r[M]=r[M++-S],r[M]=r[M++-S];M=Q}}}}else{(7&l)!=0&&(l+=8-(7&l));const U=4+(l>>>3),k=i[U-4]|i[U-3]<<8;o&&(r=n.H.W(r,M+k)),r.set(new s(i.buffer,i.byteOffset+U,k),M),l=U+k<<3,M+=k}return r.length==M?r:r.slice(0,M)},n.H.W=function(i,r){const s=i.length;if(r<=s)return i;const g=new Uint8Array(s<<1);return g.set(i,0),g},n.H.R=function(i,r,s,g,x,I){const v=n.H.e,P=n.H.Z;let R=0;for(;R<s;){const E=i[P(g,x)&r];x+=15&E;const T=E>>>4;if(T<=15)I[R]=T,R++;else{let h=0,M=0;T==16?(M=3+v(g,x,2),x+=2,h=I[R-1]):T==17?(M=3+v(g,x,3),x+=3):T==18&&(M=11+v(g,x,7),x+=7);const l=R+M;for(;R<l;)I[R]=h,R++}}return x},n.H.V=function(i,r,s,g){let x=0,I=0;const v=g.length>>>1;for(;I<s;){const P=i[I+r];g[I<<1]=0,g[1+(I<<1)]=P,P>x&&(x=P),I++}for(;I<v;)g[I<<1]=0,g[1+(I<<1)]=0,I++;return x},n.H.n=function(i,r){const s=n.H.m,g=i.length;let x,I,v,P;const R=s.j;for(var E=0;E<=r;E++)R[E]=0;for(E=1;E<g;E+=2)R[i[E]]++;const T=s.K;for(x=0,R[0]=0,I=1;I<=r;I++)x=x+R[I-1]<<1,T[I]=x;for(v=0;v<g;v+=2)P=i[v+1],P!=0&&(i[v]=T[P],T[P]++)},n.H.A=function(i,r,s){const g=i.length,x=n.H.m.r;for(let I=0;I<g;I+=2)if(i[I+1]!=0){const v=I>>1,P=i[I+1],R=v<<4|P,E=r-P;let T=i[I]<<E;const h=T+(1<<E);for(;T!=h;)s[x[T]>>>15-r]=R,T++}},n.H.l=function(i,r){const s=n.H.m.r,g=15-r;for(let x=0;x<i.length;x+=2){const I=i[x]<<r-i[x+1];i[x]=s[I]>>>g}},n.H.M=function(i,r,s){s<<=7&r;const g=r>>>3;i[g]|=s,i[g+1]|=s>>>8},n.H.I=function(i,r,s){s<<=7&r;const g=r>>>3;i[g]|=s,i[g+1]|=s>>>8,i[g+2]|=s>>>16},n.H.e=function(i,r,s){return(i[r>>>3]|i[1+(r>>>3)]<<8)>>>(7&r)&(1<<s)-1},n.H.b=function(i,r,s){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)&(1<<s)-1},n.H.Z=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16)>>>(7&r)},n.H.i=function(i,r){return(i[r>>>3]|i[1+(r>>>3)]<<8|i[2+(r>>>3)]<<16|i[3+(r>>>3)]<<24)>>>(7&r)},n.H.m=(function(){const i=Uint16Array,r=Uint32Array;return{K:new i(16),j:new i(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new i(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new i(512),_:[],h:new i(32),$:[],w:new i(32768),C:[],v:[],d:new i(32768),D:[],u:new i(512),Q:[],r:new i(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new i(65536),g:new i(32768)}})(),(function(){const i=n.H.m;for(var r=0;r<32768;r++){let g=r;g=(2863311530&g)>>>1|(1431655765&g)<<1,g=(3435973836&g)>>>2|(858993459&g)<<2,g=(4042322160&g)>>>4|(252645135&g)<<4,g=(4278255360&g)>>>8|(16711935&g)<<8,i.r[r]=(g>>>16|g<<16)>>>17}function s(g,x,I){for(;x--!=0;)g.push(0,I)}for(r=0;r<32;r++)i.q[r]=i.S[r]<<3|i.T[r],i.c[r]=i.p[r]<<4|i.z[r];s(i._,144,8),s(i._,112,9),s(i._,24,7),s(i._,8,8),n.H.n(i._,9),n.H.A(i._,9,i.J),n.H.l(i._,9),s(i.$,32,5),n.H.n(i.$,5),n.H.A(i.$,5,i.h),n.H.l(i.$,5),s(i.Q,19,0),s(i.C,286,0),s(i.D,30,0),s(i.v,320,0)})(),n.H.N})();function t(n){return[1,null,3,1,2,null,4][n.ctype]*n.depth}function u(n,i,r,s,g){let x=t(i);const I=Math.ceil(s*x/8);let v,P;x=Math.ceil(x/8);let R=n[r],E=0;if(R>1&&(n[r]=[0,0,1][R-2]),R==3)for(E=x;E<I;E++)n[E+1]=n[E+1]+(n[E+1-x]>>>1)&255;for(let T=0;T<g;T++)if(v=r+T*I,P=v+T+1,R=n[P-1],E=0,R==0)for(;E<I;E++)n[v+E]=n[P+E];else if(R==1){for(;E<x;E++)n[v+E]=n[P+E];for(;E<I;E++)n[v+E]=n[P+E]+n[v+E-x]}else if(R==2)for(;E<I;E++)n[v+E]=n[P+E]+n[v+E-I];else if(R==3){for(;E<x;E++)n[v+E]=n[P+E]+(n[v+E-I]>>>1);for(;E<I;E++)n[v+E]=n[P+E]+(n[v+E-I]+n[v+E-x]>>>1)}else{for(;E<x;E++)n[v+E]=n[P+E]+a(0,n[v+E-I],0);for(;E<I;E++)n[v+E]=n[P+E]+a(n[v+E-x],n[v+E-I],n[v+E-x-I])}return n}function a(n,i,r){const s=n+i-r,g=s-n,x=s-i,I=s-r;return g*g<=x*x&&g*g<=I*I?n:x*x<=I*I?i:r}function m(n,i,r){r.width=C.readUint(n,i),i+=4,r.height=C.readUint(n,i),i+=4,r.depth=n[i],i++,r.ctype=n[i],i++,r.compress=n[i],i++,r.filter=n[i],i++,r.interlace=n[i],i++}function y(n,i,r,s,g,x,I,v,P){const R=Math.min(i,g),E=Math.min(r,x);let T=0,h=0;for(let F=0;F<E;F++)for(let c=0;c<R;c++)if(I>=0&&v>=0?(T=F*i+c<<2,h=(v+F)*g+I+c<<2):(T=(-v+F)*i-I+c<<2,h=F*g+c<<2),P==0)s[h]=n[T],s[h+1]=n[T+1],s[h+2]=n[T+2],s[h+3]=n[T+3];else if(P==1){var M=n[T+3]*.00392156862745098,l=n[T]*M,f=n[T+1]*M,p=n[T+2]*M,A=s[h+3]*(1/255),w=s[h]*A,_=s[h+1]*A,b=s[h+2]*A;const o=1-M,N=M+A*o,U=N==0?0:1/N;s[h+3]=255*N,s[h+0]=(l+w*o)*U,s[h+1]=(f+_*o)*U,s[h+2]=(p+b*o)*U}else if(P==2)M=n[T+3],l=n[T],f=n[T+1],p=n[T+2],A=s[h+3],w=s[h],_=s[h+1],b=s[h+2],M==A&&l==w&&f==_&&p==b?(s[h]=0,s[h+1]=0,s[h+2]=0,s[h+3]=0):(s[h]=l,s[h+1]=f,s[h+2]=p,s[h+3]=M);else if(P==3){if(M=n[T+3],l=n[T],f=n[T+1],p=n[T+2],A=s[h+3],w=s[h],_=s[h+1],b=s[h+2],M==A&&l==w&&f==_&&p==b)continue;if(M<220&&A>20)return!1}return!0}return{decode:function(i){const r=new Uint8Array(i);let s=8;const g=C,x=g.readUshort,I=g.readUint,v={tabs:{},frames:[]},P=new Uint8Array(r.length);let R,E=0,T=0;const h=[137,80,78,71,13,10,26,10];for(var M=0;M<8;M++)if(r[M]!=h[M])throw"The input is not a PNG file!";for(;s<r.length;){const F=g.readUint(r,s);s+=4;const c=g.readASCII(r,s,4);if(s+=4,c=="IHDR")m(r,s,v);else if(c=="iCCP"){for(var l=s;r[l]!=0;)l++;g.readASCII(r,s,l-s),r[l+1];const o=r.slice(l+2,s+F);let N=null;try{N=d(o)}catch{N=e(o)}v.tabs[c]=N}else if(c=="CgBI")v.tabs[c]=r.slice(s,s+4);else if(c=="IDAT"){for(M=0;M<F;M++)P[E+M]=r[s+M];E+=F}else if(c=="acTL")v.tabs[c]={num_frames:I(r,s),num_plays:I(r,s+4)},R=new Uint8Array(r.length);else if(c=="fcTL"){T!=0&&((b=v.frames[v.frames.length-1]).data=O(v,R.slice(0,T),b.rect.width,b.rect.height),T=0);const o={x:I(r,s+12),y:I(r,s+16),width:I(r,s+4),height:I(r,s+8)};let N=x(r,s+22);N=x(r,s+20)/(N==0?100:N);const U={rect:o,delay:Math.round(1e3*N),dispose:r[s+24],blend:r[s+25]};v.frames.push(U)}else if(c=="fdAT"){for(M=0;M<F-4;M++)R[T+M]=r[s+M+4];T+=F-4}else if(c=="pHYs")v.tabs[c]=[g.readUint(r,s),g.readUint(r,s+4),r[s+8]];else if(c=="cHRM")for(v.tabs[c]=[],M=0;M<8;M++)v.tabs[c].push(g.readUint(r,s+4*M));else if(c=="tEXt"||c=="zTXt"){v.tabs[c]==null&&(v.tabs[c]={});var f=g.nextZero(r,s),p=g.readASCII(r,s,f-s),A=s+F-f-1;if(c=="tEXt")_=g.readASCII(r,f+1,A);else{var w=d(r.slice(f+2,f+2+A));_=g.readUTF8(w,0,w.length)}v.tabs[c][p]=_}else if(c=="iTXt"){v.tabs[c]==null&&(v.tabs[c]={}),f=0,l=s,f=g.nextZero(r,l),p=g.readASCII(r,l,f-l);const o=r[l=f+1];var _;r[l+1],l+=2,f=g.nextZero(r,l),g.readASCII(r,l,f-l),l=f+1,f=g.nextZero(r,l),g.readUTF8(r,l,f-l),A=F-((l=f+1)-s),o==0?_=g.readUTF8(r,l,A):(w=d(r.slice(l,l+A)),_=g.readUTF8(w,0,w.length)),v.tabs[c][p]=_}else if(c=="PLTE")v.tabs[c]=g.readBytes(r,s,F);else if(c=="hIST"){const o=v.tabs.PLTE.length/3;for(v.tabs[c]=[],M=0;M<o;M++)v.tabs[c].push(x(r,s+2*M))}else if(c=="tRNS")v.ctype==3?v.tabs[c]=g.readBytes(r,s,F):v.ctype==0?v.tabs[c]=x(r,s):v.ctype==2&&(v.tabs[c]=[x(r,s),x(r,s+2),x(r,s+4)]);else if(c=="gAMA")v.tabs[c]=g.readUint(r,s)/1e5;else if(c=="sRGB")v.tabs[c]=r[s];else if(c=="bKGD")v.ctype==0||v.ctype==4?v.tabs[c]=[x(r,s)]:v.ctype==2||v.ctype==6?v.tabs[c]=[x(r,s),x(r,s+2),x(r,s+4)]:v.ctype==3&&(v.tabs[c]=r[s]);else if(c=="IEND")break;s+=F,g.readUint(r,s),s+=4}var b;return T!=0&&((b=v.frames[v.frames.length-1]).data=O(v,R.slice(0,T),b.rect.width,b.rect.height)),v.data=O(v,P,v.width,v.height),delete v.compress,delete v.interlace,delete v.filter,v},toRGBA8:function(i){const r=i.width,s=i.height;if(i.tabs.acTL==null)return[j(i.data,r,s,i).buffer];const g=[];i.frames[0].data==null&&(i.frames[0].data=i.data);const x=r*s*4,I=new Uint8Array(x),v=new Uint8Array(x),P=new Uint8Array(x);for(let E=0;E<i.frames.length;E++){const T=i.frames[E],h=T.rect.x,M=T.rect.y,l=T.rect.width,f=T.rect.height,p=j(T.data,l,f,i);if(E!=0)for(var R=0;R<x;R++)P[R]=I[R];if(T.blend==0?y(p,l,f,I,r,s,h,M,0):T.blend==1&&y(p,l,f,I,r,s,h,M,1),g.push(I.buffer.slice(0)),T.dispose!=0){if(T.dispose==1)y(v,l,f,I,r,s,h,M,0);else if(T.dispose==2)for(R=0;R<x;R++)I[R]=P[R]}}return g},_paeth:a,_copyTile:y,_bin:C}})();(function(){const{_copyTile:C}=he,{_bin:j}=he,O=he._paeth;var d={table:(function(){const l=new Uint32Array(256);for(let f=0;f<256;f++){let p=f;for(let A=0;A<8;A++)1&p?p=3988292384^p>>>1:p>>>=1;l[f]=p}return l})(),update(l,f,p,A){for(let w=0;w<A;w++)l=d.table[255&(l^f[p+w])]^l>>>8;return l},crc:(l,f,p)=>4294967295^d.update(4294967295,l,f,p)};function e(l,f,p,A){f[p]+=l[0]*A>>4,f[p+1]+=l[1]*A>>4,f[p+2]+=l[2]*A>>4,f[p+3]+=l[3]*A>>4}function t(l){return Math.max(0,Math.min(255,l))}function u(l,f){const p=l[0]-f[0],A=l[1]-f[1],w=l[2]-f[2],_=l[3]-f[3];return p*p+A*A+w*w+_*_}function a(l,f,p,A,w,_,b){b==null&&(b=1);const F=A.length,c=[];for(var o=0;o<F;o++){const S=A[o];c.push([S>>>0&255,S>>>8&255,S>>>16&255,S>>>24&255])}for(o=0;o<F;o++){let S=4294967295;for(var N=0,U=0;U<F;U++){var k=u(c[o],c[U]);U!=o&&k<S&&(S=k,N=U)}}const Q=new Uint32Array(w.buffer),L=new Int16Array(f*p*4),D=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(o=0;o<D.length;o++)D[o]=255*((D[o]+.5)/16-.5);for(let S=0;S<p;S++)for(let B=0;B<f;B++){var H;o=4*(S*f+B),b!=2?H=[t(l[o]+L[o]),t(l[o+1]+L[o+1]),t(l[o+2]+L[o+2]),t(l[o+3]+L[o+3])]:(k=D[4*(3&S)+(3&B)],H=[t(l[o]+k),t(l[o+1]+k),t(l[o+2]+k),t(l[o+3]+k)]),N=0;let Z=16777215;for(U=0;U<F;U++){const G=u(H,c[U]);G<Z&&(Z=G,N=U)}const q=c[N],W=[H[0]-q[0],H[1]-q[1],H[2]-q[2],H[3]-q[3]];b==1&&(B!=f-1&&e(W,L,o+4,7),S!=p-1&&(B!=0&&e(W,L,o+4*f-4,3),e(W,L,o+4*f,5),B!=f-1&&e(W,L,o+4*f+4,1))),_[o>>2]=N,Q[o>>2]=A[N]}}function m(l,f,p,A,w){w==null&&(w={});const{crc:_}=d,b=j.writeUint,F=j.writeUshort,c=j.writeASCII;let o=8;const N=l.frames.length>1;let U,k=!1,Q=33+(N?20:0);if(w.sRGB!=null&&(Q+=13),w.pHYs!=null&&(Q+=21),w.iCCP!=null&&(U=pako.deflate(w.iCCP),Q+=21+U.length+4),l.ctype==3){for(var L=l.plte.length,D=0;D<L;D++)l.plte[D]>>>24!=255&&(k=!0);Q+=8+3*L+4+(k?8+1*L+4:0)}for(var H=0;H<l.frames.length;H++)N&&(Q+=38),Q+=(q=l.frames[H]).cimg.length+12,H!=0&&(Q+=4);Q+=12;const S=new Uint8Array(Q),B=[137,80,78,71,13,10,26,10];for(D=0;D<8;D++)S[D]=B[D];if(b(S,o,13),o+=4,c(S,o,"IHDR"),o+=4,b(S,o,f),o+=4,b(S,o,p),o+=4,S[o]=l.depth,o++,S[o]=l.ctype,o++,S[o]=0,o++,S[o]=0,o++,S[o]=0,o++,b(S,o,_(S,o-17,17)),o+=4,w.sRGB!=null&&(b(S,o,1),o+=4,c(S,o,"sRGB"),o+=4,S[o]=w.sRGB,o++,b(S,o,_(S,o-5,5)),o+=4),w.iCCP!=null){const W=13+U.length;b(S,o,W),o+=4,c(S,o,"iCCP"),o+=4,c(S,o,"ICC profile"),o+=11,o+=2,S.set(U,o),o+=U.length,b(S,o,_(S,o-(W+4),W+4)),o+=4}if(w.pHYs!=null&&(b(S,o,9),o+=4,c(S,o,"pHYs"),o+=4,b(S,o,w.pHYs[0]),o+=4,b(S,o,w.pHYs[1]),o+=4,S[o]=w.pHYs[2],o++,b(S,o,_(S,o-13,13)),o+=4),N&&(b(S,o,8),o+=4,c(S,o,"acTL"),o+=4,b(S,o,l.frames.length),o+=4,b(S,o,w.loop!=null?w.loop:0),o+=4,b(S,o,_(S,o-12,12)),o+=4),l.ctype==3){for(b(S,o,3*(L=l.plte.length)),o+=4,c(S,o,"PLTE"),o+=4,D=0;D<L;D++){const W=3*D,G=l.plte[D],Y=255&G,te=G>>>8&255,xe=G>>>16&255;S[o+W+0]=Y,S[o+W+1]=te,S[o+W+2]=xe}if(o+=3*L,b(S,o,_(S,o-3*L-4,3*L+4)),o+=4,k){for(b(S,o,L),o+=4,c(S,o,"tRNS"),o+=4,D=0;D<L;D++)S[o+D]=l.plte[D]>>>24&255;o+=L,b(S,o,_(S,o-L-4,L+4)),o+=4}}let Z=0;for(H=0;H<l.frames.length;H++){var q=l.frames[H];N&&(b(S,o,26),o+=4,c(S,o,"fcTL"),o+=4,b(S,o,Z++),o+=4,b(S,o,q.rect.width),o+=4,b(S,o,q.rect.height),o+=4,b(S,o,q.rect.x),o+=4,b(S,o,q.rect.y),o+=4,F(S,o,A[H]),o+=2,F(S,o,1e3),o+=2,S[o]=q.dispose,o++,S[o]=q.blend,o++,b(S,o,_(S,o-30,30)),o+=4);const W=q.cimg;b(S,o,(L=W.length)+(H==0?0:4)),o+=4;const G=o;c(S,o,H==0?"IDAT":"fdAT"),o+=4,H!=0&&(b(S,o,Z++),o+=4),S.set(W,o),o+=L,b(S,o,_(S,G,o-G)),o+=4}return b(S,o,0),o+=4,c(S,o,"IEND"),o+=4,b(S,o,_(S,o-4,4)),o+=4,S.buffer}function y(l,f,p){for(let A=0;A<l.frames.length;A++){const w=l.frames[A];w.rect.width;const _=w.rect.height,b=new Uint8Array(_*w.bpl+_);w.cimg=s(w.img,_,w.bpp,w.bpl,b,f,p)}}function n(l,f,p,A,w){const _=w[0],b=w[1],F=w[2],c=w[3],o=w[4],N=w[5];let U=6,k=8,Q=255;for(var L=0;L<l.length;L++){const ne=new Uint8Array(l[L]);for(var D=ne.length,H=0;H<D;H+=4)Q&=ne[H+3]}const S=Q!=255,B=(function(X,$,re,se,J,fe){const ee=[];for(var K=0;K<X.length;K++){const ae=new Uint8Array(X[K]),de=new Uint32Array(ae.buffer);var ce;let ue=0,be=0,me=$,Ue=re,Le=se?1:0;if(K!=0){const it=fe||se||K==1||ee[K-2].dispose!=0?1:2;let De=0,We=1e9;for(let Me=0;Me<it;Me++){var ve=new Uint8Array(X[K-1-Me]);const ot=new Uint32Array(X[K-1-Me]);let ye=$,we=re,Ie=-1,Se=-1;for(let Fe=0;Fe<re;Fe++)for(let Ee=0;Ee<$;Ee++)de[ie=Fe*$+Ee]!=ot[ie]&&(Ee<ye&&(ye=Ee),Ee>Ie&&(Ie=Ee),Fe<we&&(we=Fe),Fe>Se&&(Se=Fe));Ie==-1&&(ye=we=Ie=Se=0),J&&((1&ye)==1&&ye--,(1&we)==1&&we--);const qe=(Ie-ye+1)*(Se-we+1);qe<We&&(We=qe,De=Me,ue=ye,be=we,me=Ie-ye+1,Ue=Se-we+1)}ve=new Uint8Array(X[K-1-De]),De==1&&(ee[K-1].dispose=2),ce=new Uint8Array(me*Ue*4),C(ve,$,re,ce,me,Ue,-ue,-be,0),Le=C(ae,$,re,ce,me,Ue,-ue,-be,3)?1:0,Le==1?r(ae,$,re,ce,{x:ue,y:be,width:me,height:Ue}):C(ae,$,re,ce,me,Ue,-ue,-be,0)}else ce=ae.slice(0);ee.push({rect:{x:ue,y:be,width:me,height:Ue},img:ce,blend:Le,dispose:0})}if(se)for(K=0;K<ee.length;K++){if((_e=ee[K]).blend==1)continue;const ae=_e.rect,de=ee[K-1].rect,ue=Math.min(ae.x,de.x),be=Math.min(ae.y,de.y),me={x:ue,y:be,width:Math.max(ae.x+ae.width,de.x+de.width)-ue,height:Math.max(ae.y+ae.height,de.y+de.height)-be};ee[K-1].dispose=1,K-1!=0&&i(X,$,re,ee,K-1,me,J),i(X,$,re,ee,K,me,J)}let Re=0;if(X.length!=1)for(var ie=0;ie<ee.length;ie++){var _e;Re+=(_e=ee[ie]).rect.width*_e.rect.height}return ee})(l,f,p,_,b,F),Z={},q=[],W=[];if(A!=0){const ne=[];for(H=0;H<B.length;H++)ne.push(B[H].img.buffer);const X=(function(J){let fe=0;for(var ee=0;ee<J.length;ee++)fe+=J[ee].byteLength;const K=new Uint8Array(fe);let ce=0;for(ee=0;ee<J.length;ee++){const ve=new Uint8Array(J[ee]),Re=ve.length;for(let ie=0;ie<Re;ie+=4){let _e=ve[ie],ae=ve[ie+1],de=ve[ie+2];const ue=ve[ie+3];ue==0&&(_e=ae=de=0),K[ce+ie]=_e,K[ce+ie+1]=ae,K[ce+ie+2]=de,K[ce+ie+3]=ue}ce+=Re}return K.buffer})(ne),$=x(X,A);for(H=0;H<$.plte.length;H++)q.push($.plte[H].est.rgba);let re=0;for(H=0;H<B.length;H++){const se=(Y=B[H]).img.length;var G=new Uint8Array($.inds.buffer,re>>2,se>>2);W.push(G);const J=new Uint8Array($.abuf,re,se);N&&a(Y.img,Y.rect.width,Y.rect.height,q,J,G),Y.img.set(J),re+=se}}else for(L=0;L<B.length;L++){var Y=B[L];const ne=new Uint32Array(Y.img.buffer);var te=Y.rect.width;for(D=ne.length,G=new Uint8Array(D),W.push(G),H=0;H<D;H++){const X=ne[H];if(H!=0&&X==ne[H-1])G[H]=G[H-1];else if(H>te&&X==ne[H-te])G[H]=G[H-te];else{let $=Z[X];if($==null&&(Z[X]=$=q.length,q.push(X),q.length>=300))break;G[H]=$}}}const xe=q.length;for(xe<=256&&o==0&&(k=xe<=2?1:xe<=4?2:xe<=16?4:8,k=Math.max(k,c)),L=0;L<B.length;L++){(Y=B[L]).rect.x,Y.rect.y,te=Y.rect.width;const ne=Y.rect.height;let X=Y.img;new Uint32Array(X.buffer);let $=4*te,re=4;if(xe<=256&&o==0){$=Math.ceil(k*te/8);var ge=new Uint8Array($*ne);const se=W[L];for(let J=0;J<ne;J++){H=J*$;const fe=J*te;if(k==8)for(var V=0;V<te;V++)ge[H+V]=se[fe+V];else if(k==4)for(V=0;V<te;V++)ge[H+(V>>1)]|=se[fe+V]<<4-4*(1&V);else if(k==2)for(V=0;V<te;V++)ge[H+(V>>2)]|=se[fe+V]<<6-2*(3&V);else if(k==1)for(V=0;V<te;V++)ge[H+(V>>3)]|=se[fe+V]<<7-1*(7&V)}X=ge,U=3,re=1}else if(S==0&&B.length==1){ge=new Uint8Array(te*ne*3);const se=te*ne;for(H=0;H<se;H++){const J=3*H,fe=4*H;ge[J]=X[fe],ge[J+1]=X[fe+1],ge[J+2]=X[fe+2]}X=ge,U=2,re=3,$=3*te}Y.img=X,Y.bpl=$,Y.bpp=re}return{ctype:U,depth:k,plte:q,frames:B}}function i(l,f,p,A,w,_,b){const F=Uint8Array,c=Uint32Array,o=new F(l[w-1]),N=new c(l[w-1]),U=w+1<l.length?new F(l[w+1]):null,k=new F(l[w]),Q=new c(k.buffer);let L=f,D=p,H=-1,S=-1;for(let Z=0;Z<_.height;Z++)for(let q=0;q<_.width;q++){const W=_.x+q,G=_.y+Z,Y=G*f+W,te=Q[Y];te==0||A[w-1].dispose==0&&N[Y]==te&&(U==null||U[4*Y+3]!=0)||(W<L&&(L=W),W>H&&(H=W),G<D&&(D=G),G>S&&(S=G))}H==-1&&(L=D=H=S=0),b&&((1&L)==1&&L--,(1&D)==1&&D--),_={x:L,y:D,width:H-L+1,height:S-D+1};const B=A[w];B.rect=_,B.blend=1,B.img=new Uint8Array(_.width*_.height*4),A[w-1].dispose==0?(C(o,f,p,B.img,_.width,_.height,-_.x,-_.y,0),r(k,f,p,B.img,_)):C(k,f,p,B.img,_.width,_.height,-_.x,-_.y,0)}function r(l,f,p,A,w){C(l,f,p,A,w.width,w.height,-w.x,-w.y,2)}function s(l,f,p,A,w,_,b){const F=[];let c,o=[0,1,2,3,4];_!=-1?o=[_]:(f*A>5e5||p==1)&&(o=[0]),b&&(c={level:0});const N=pt;for(var U=0;U<o.length;U++){for(let L=0;L<f;L++)g(w,l,L,A,p,o[U]);F.push(N.deflate(w,c))}let k,Q=1e9;for(U=0;U<F.length;U++)F[U].length<Q&&(k=U,Q=F[U].length);return F[k]}function g(l,f,p,A,w,_){const b=p*A;let F=b+p;if(l[F]=_,F++,_==0)if(A<500)for(var c=0;c<A;c++)l[F+c]=f[b+c];else l.set(new Uint8Array(f.buffer,b,A),F);else if(_==1){for(c=0;c<w;c++)l[F+c]=f[b+c];for(c=w;c<A;c++)l[F+c]=f[b+c]-f[b+c-w]+256&255}else if(p==0){for(c=0;c<w;c++)l[F+c]=f[b+c];if(_==2)for(c=w;c<A;c++)l[F+c]=f[b+c];if(_==3)for(c=w;c<A;c++)l[F+c]=f[b+c]-(f[b+c-w]>>1)+256&255;if(_==4)for(c=w;c<A;c++)l[F+c]=f[b+c]-O(f[b+c-w],0,0)+256&255}else{if(_==2)for(c=0;c<A;c++)l[F+c]=f[b+c]+256-f[b+c-A]&255;if(_==3){for(c=0;c<w;c++)l[F+c]=f[b+c]+256-(f[b+c-A]>>1)&255;for(c=w;c<A;c++)l[F+c]=f[b+c]+256-(f[b+c-A]+f[b+c-w]>>1)&255}if(_==4){for(c=0;c<w;c++)l[F+c]=f[b+c]+256-O(0,f[b+c-A],0)&255;for(c=w;c<A;c++)l[F+c]=f[b+c]+256-O(f[b+c-w],f[b+c-A],f[b+c-w-A])&255}}}function x(l,f){const p=new Uint8Array(l),A=p.slice(0),w=new Uint32Array(A.buffer),_=I(A,f),b=_[0],F=_[1],c=p.length,o=new Uint8Array(c>>2);let N;if(p.length<2e7)for(var U=0;U<c;U+=4)N=v(b,k=p[U]*(1/255),Q=p[U+1]*(1/255),L=p[U+2]*(1/255),D=p[U+3]*(1/255)),o[U>>2]=N.ind,w[U>>2]=N.est.rgba;else for(U=0;U<c;U+=4){var k=p[U]*.00392156862745098,Q=p[U+1]*(1/255),L=p[U+2]*(1/255),D=p[U+3]*(1/255);for(N=b;N.left;)N=P(N.est,k,Q,L,D)<=0?N.left:N.right;o[U>>2]=N.ind,w[U>>2]=N.est.rgba}return{abuf:A.buffer,inds:o,plte:F}}function I(l,f,p){p==null&&(p=1e-4);const A=new Uint32Array(l.buffer),w={i0:0,i1:l.length,bst:null,est:null,tdst:0,left:null,right:null};w.bst=T(l,w.i0,w.i1),w.est=h(w.bst);const _=[w];for(;_.length<f;){let F=0,c=0;for(var b=0;b<_.length;b++)_[b].est.L>F&&(F=_[b].est.L,c=b);if(F<p)break;const o=_[c],N=R(l,A,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=N||o.i1<=N){o.est.L=0;continue}const U={i0:o.i0,i1:N,bst:null,est:null,tdst:0,left:null,right:null};U.bst=T(l,U.i0,U.i1),U.est=h(U.bst);const k={i0:N,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(k.bst={R:[],m:[],N:o.bst.N-U.bst.N},b=0;b<16;b++)k.bst.R[b]=o.bst.R[b]-U.bst.R[b];for(b=0;b<4;b++)k.bst.m[b]=o.bst.m[b]-U.bst.m[b];k.est=h(k.bst),o.left=U,o.right=k,_[c]=U,_.push(k)}for(_.sort(((F,c)=>c.bst.N-F.bst.N)),b=0;b<_.length;b++)_[b].ind=b;return[w,_]}function v(l,f,p,A,w){if(l.left==null)return l.tdst=(function(U,k,Q,L,D){const H=k-U[0],S=Q-U[1],B=L-U[2],Z=D-U[3];return H*H+S*S+B*B+Z*Z})(l.est.q,f,p,A,w),l;const _=P(l.est,f,p,A,w);let b=l.left,F=l.right;_>0&&(b=l.right,F=l.left);const c=v(b,f,p,A,w);if(c.tdst<=_*_)return c;const o=v(F,f,p,A,w);return o.tdst<c.tdst?o:c}function P(l,f,p,A,w){const{e:_}=l;return _[0]*f+_[1]*p+_[2]*A+_[3]*w-l.eMq}function R(l,f,p,A,w,_){for(A-=4;p<A;){for(;E(l,p,w)<=_;)p+=4;for(;E(l,A,w)>_;)A-=4;if(p>=A)break;const b=f[p>>2];f[p>>2]=f[A>>2],f[A>>2]=b,p+=4,A-=4}for(;E(l,p,w)>_;)p-=4;return p+4}function E(l,f,p){return l[f]*p[0]+l[f+1]*p[1]+l[f+2]*p[2]+l[f+3]*p[3]}function T(l,f,p){const A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w=[0,0,0,0],_=p-f>>2;for(let b=f;b<p;b+=4){const F=l[b]*.00392156862745098,c=l[b+1]*(1/255),o=l[b+2]*(1/255),N=l[b+3]*(1/255);w[0]+=F,w[1]+=c,w[2]+=o,w[3]+=N,A[0]+=F*F,A[1]+=F*c,A[2]+=F*o,A[3]+=F*N,A[5]+=c*c,A[6]+=c*o,A[7]+=c*N,A[10]+=o*o,A[11]+=o*N,A[15]+=N*N}return A[4]=A[1],A[8]=A[2],A[9]=A[6],A[12]=A[3],A[13]=A[7],A[14]=A[11],{R:A,m:w,N:_}}function h(l){const{R:f}=l,{m:p}=l,{N:A}=l,w=p[0],_=p[1],b=p[2],F=p[3],c=A==0?0:1/A,o=[f[0]-w*w*c,f[1]-w*_*c,f[2]-w*b*c,f[3]-w*F*c,f[4]-_*w*c,f[5]-_*_*c,f[6]-_*b*c,f[7]-_*F*c,f[8]-b*w*c,f[9]-b*_*c,f[10]-b*b*c,f[11]-b*F*c,f[12]-F*w*c,f[13]-F*_*c,f[14]-F*b*c,f[15]-F*F*c],N=o,U=M;let k=[Math.random(),Math.random(),Math.random(),Math.random()],Q=0,L=0;if(A!=0)for(let H=0;H<16&&(k=U.multVec(N,k),L=Math.sqrt(U.dot(k,k)),k=U.sml(1/L,k),!(H!=0&&Math.abs(L-Q)<1e-9));H++)Q=L;const D=[w*c,_*c,b*c,F*c];return{Cov:o,q:D,e:k,L:Q,eMq255:U.dot(U.sml(255,D),k),eMq:U.dot(k,D),rgba:(Math.round(255*D[3])<<24|Math.round(255*D[2])<<16|Math.round(255*D[1])<<8|Math.round(255*D[0])<<0)>>>0}}var M={multVec:(l,f)=>[l[0]*f[0]+l[1]*f[1]+l[2]*f[2]+l[3]*f[3],l[4]*f[0]+l[5]*f[1]+l[6]*f[2]+l[7]*f[3],l[8]*f[0]+l[9]*f[1]+l[10]*f[2]+l[11]*f[3],l[12]*f[0]+l[13]*f[1]+l[14]*f[2]+l[15]*f[3]],dot:(l,f)=>l[0]*f[0]+l[1]*f[1]+l[2]*f[2]+l[3]*f[3],sml:(l,f)=>[l*f[0],l*f[1],l*f[2],l*f[3]]};he.encode=function(f,p,A,w,_,b,F){w==null&&(w=0),F==null&&(F=!1);const c=n(f,p,A,w,[!1,!1,!1,0,F,!1]);return y(c,-1),m(c,p,A,_,b)},he.encodeLL=function(f,p,A,w,_,b,F,c){const o={ctype:0+(w==1?0:2)+(_==0?0:4),depth:b,frames:[]},N=(w+_)*b,U=N*p;for(let k=0;k<f.length;k++)o.frames.push({rect:{x:0,y:0,width:p,height:A},img:new Uint8Array(f[k]),blend:0,dispose:1,bpp:Math.ceil(N/8),bpl:Math.ceil(U/8)});return y(o,0,!0),m(o,p,A,F,c)},he.encode.compress=n,he.encode.dither=a,he.quantize=x,he.quantize.getKDtree=I,he.quantize.getNearest=v})();const Ke={toArrayBuffer(C,j){const O=C.width,d=C.height,e=O<<2,t=C.getContext("2d").getImageData(0,0,O,d),u=new Uint32Array(t.data.buffer),a=(32*O+31)/32<<2,m=a*d,y=122+m,n=new ArrayBuffer(y),i=new DataView(n),r=1<<20;let s,g,x,I,v=r,P=0,R=0,E=0;function T(l){i.setUint16(R,l,!0),R+=2}function h(l){i.setUint32(R,l,!0),R+=4}function M(l){R+=l}T(19778),h(y),M(4),h(122),h(108),h(O),h(-d>>>0),T(1),T(32),h(3),h(m),h(2835),h(2835),M(8),h(16711680),h(65280),h(255),h(4278190080),h(1466527264),(function l(){for(;P<d&&v>0;){for(I=122+P*a,s=0;s<e;)v--,g=u[E++],x=g>>>24,i.setUint32(I+s,g<<8|x),s+=4;P++}E<u.length?(v=r,setTimeout(l,Ke._dly)):j(n)})()},toBlob(C,j){this.toArrayBuffer(C,(O=>{j(new Blob([O],{type:"image/bmp"}))}))},_dly:9};var le={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},bt={[le.CHROME]:16384,[le.FIREFOX]:11180,[le.DESKTOP_SAFARI]:16384,[le.IE]:8192,[le.IOS]:4096,[le.ETC]:8192};const Qe=typeof window<"u",Ze=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,ke=Qe&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),vt=(Qe||Ze)&&(ke&&ke.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Xe=(Qe||Ze)&&(ke&&ke.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Be(C,j,O=Date.now()){return new Promise((d=>{const e=C.split(","),t=e[0].match(/:(.*?);/)[1],u=globalThis.atob(e[1]);let a=u.length;const m=new Uint8Array(a);for(;a--;)m[a]=u.charCodeAt(a);const y=new Blob([m],{type:t});y.name=j,y.lastModified=O,d(y)}))}function Ve(C){return new Promise(((j,O)=>{const d=new Xe;d.onload=()=>j(d.result),d.onerror=e=>O(e),d.readAsDataURL(C)}))}function Ye(C){return new Promise(((j,O)=>{const d=new Image;d.onload=()=>j(d),d.onerror=e=>O(e),d.src=C}))}function Ce(){if(Ce.cachedResult!==void 0)return Ce.cachedResult;let C=le.ETC;const{userAgent:j}=navigator;return/Chrom(e|ium)/i.test(j)?C=le.CHROME:/iP(ad|od|hone)/i.test(j)&&/WebKit/i.test(j)?C=le.IOS:/Safari/i.test(j)?C=le.DESKTOP_SAFARI:/Firefox/i.test(j)?C=le.FIREFOX:(/MSIE/i.test(j)||document.documentMode)&&(C=le.IE),Ce.cachedResult=C,Ce.cachedResult}function Je(C,j){const O=Ce(),d=bt[O];let e=C,t=j,u=e*t;const a=e>t?t/e:e/t;for(;u>d*d;){const m=(d+e)/2,y=(d+t)/2;m<y?(t=y,e=y*a):(t=m*a,e=m),u=e*t}return{width:e,height:t}}function He(C,j){let O,d;try{if(O=new OffscreenCanvas(C,j),d=O.getContext("2d"),d===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{O=document.createElement("canvas"),d=O.getContext("2d")}return O.width=C,O.height=j,[O,d]}function et(C,j){const{width:O,height:d}=Je(C.width,C.height),[e,t]=He(O,d);return j&&/jpe?g/.test(j)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(C,0,0,e.width,e.height),e}function Ne(){return Ne.cachedResult!==void 0||(Ne.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ne.cachedResult}function Pe(C,j={}){return new Promise((function(O,d){let e,t;var u=function(){try{return t=et(e,j.fileType||C.type),O([e,t])}catch(m){return d(m)}},a=function(m){try{var y=function(n){try{throw n}catch(i){return d(i)}};try{let n;return Ve(C).then((function(i){try{return n=i,Ye(n).then((function(r){try{return e=r,(function(){try{return u()}catch(s){return d(s)}})()}catch(s){return y(s)}}),y)}catch(r){return y(r)}}),y)}catch(n){y(n)}}catch(n){return d(n)}};try{if(Ne()||[le.DESKTOP_SAFARI,le.MOBILE_SAFARI].includes(Ce()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(C).then((function(m){try{return e=m,u()}catch{return a()}}),a)}catch{a()}}))}function Oe(C,j,O,d,e=1){return new Promise((function(t,u){let a;if(j==="image/png"){let y,n,i;return y=C.getContext("2d"),{data:n}=y.getImageData(0,0,C.width,C.height),i=he.encode([n.buffer],C.width,C.height,4096*e),a=new Blob([i],{type:j}),a.name=O,a.lastModified=d,m.call(this)}{let y=function(){return m.call(this)};if(j==="image/bmp")return new Promise((n=>Ke.toBlob(C,n))).then(function(n){try{return a=n,a.name=O,a.lastModified=d,y.call(this)}catch(i){return u(i)}}.bind(this),u);{let n=function(){return y.call(this)};if(typeof OffscreenCanvas=="function"&&C instanceof OffscreenCanvas)return C.convertToBlob({type:j,quality:e}).then(function(i){try{return a=i,a.name=O,a.lastModified=d,n.call(this)}catch(r){return u(r)}}.bind(this),u);{let i;return i=C.toDataURL(j,e),Be(i,O,d).then(function(r){try{return a=r,n.call(this)}catch(s){return u(s)}}.bind(this),u)}}}function m(){return t(a)}}))}function pe(C){C.width=0,C.height=0}function je(){return new Promise((function(C,j){let O,d,e,t;return je.cachedResult!==void 0?C(je.cachedResult):Be("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(u){try{return O=u,Pe(O).then((function(a){try{return d=a[1],Oe(d,O.type,O.name,O.lastModified).then((function(m){try{return e=m,pe(d),Pe(e).then((function(y){try{return t=y[0],je.cachedResult=t.width===1&&t.height===2,C(je.cachedResult)}catch(n){return j(n)}}),j)}catch(y){return j(y)}}),j)}catch(m){return j(m)}}),j)}catch(a){return j(a)}}),j)}))}function tt(C){return new Promise(((j,O)=>{const d=new Xe;d.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return j(-2);const u=t.byteLength;let a=2;for(;a<u;){if(t.getUint16(a+2,!1)<=8)return j(-1);const m=t.getUint16(a,!1);if(a+=2,m==65505){if(t.getUint32(a+=2,!1)!=1165519206)return j(-1);const y=t.getUint16(a+=6,!1)==18761;a+=t.getUint32(a+4,y);const n=t.getUint16(a,y);a+=2;for(let i=0;i<n;i++)if(t.getUint16(a+12*i,y)==274)return j(t.getUint16(a+12*i+8,y))}else{if((65280&m)!=65280)break;a+=t.getUint16(a,!1)}}return j(-1)},d.onerror=e=>O(e),d.readAsArrayBuffer(C)}))}function rt(C,j){const{width:O}=C,{height:d}=C,{maxWidthOrHeight:e}=j;let t,u=C;return isFinite(e)&&(O>e||d>e)&&([u,t]=He(O,d),O>d?(u.width=e,u.height=d/O*e):(u.width=O/d*e,u.height=e),t.drawImage(C,0,0,u.width,u.height),pe(C)),u}function nt(C,j){const{width:O}=C,{height:d}=C,[e,t]=He(O,d);switch(j>4&&j<9?(e.width=d,e.height=O):(e.width=O,e.height=d),j){case 2:t.transform(-1,0,0,1,O,0);break;case 3:t.transform(-1,0,0,-1,O,d);break;case 4:t.transform(1,0,0,-1,0,d);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,d,0);break;case 7:t.transform(0,-1,-1,0,d,O);break;case 8:t.transform(0,-1,1,0,0,O)}return t.drawImage(C,0,0,O,d),pe(C),e}function Ge(C,j,O=0){return new Promise((function(d,e){let t,u,a,m,y,n,i,r,s,g,x,I,v,P,R,E,T,h,M,l;function f(A=5){if(j.signal&&j.signal.aborted)throw j.signal.reason;t+=A,j.onProgress(Math.min(t,100))}function p(A){if(j.signal&&j.signal.aborted)throw j.signal.reason;t=Math.min(Math.max(A,t),100),j.onProgress(t)}return t=O,u=j.maxIteration||10,a=1024*j.maxSizeMB*1024,f(),Pe(C,j).then(function(A){try{return[,m]=A,f(),y=rt(m,j),f(),new Promise((function(w,_){var b;if(!(b=j.exifOrientation))return tt(C).then(function(c){try{return b=c,F.call(this)}catch(o){return _(o)}}.bind(this),_);function F(){return w(b)}return F.call(this)})).then(function(w){try{return n=w,f(),je().then(function(_){try{return i=_?y:nt(y,n),f(),r=j.initialQuality||1,s=j.fileType||C.type,Oe(i,s,C.name,C.lastModified,r).then(function(b){try{{let c=function(){if(u--&&(R>a||R>v)){let N,U;return N=l?.95*M.width:M.width,U=l?.95*M.height:M.height,[T,h]=He(N,U),h.drawImage(M,0,0,N,U),r*=s==="image/png"?.85:.95,Oe(T,s,C.name,C.lastModified,r).then((function(k){try{return E=k,pe(M),M=T,R=E.size,p(Math.min(99,Math.floor((P-R)/(P-a)*100))),c}catch(Q){return e(Q)}}),e)}return[1]},o=function(){return pe(M),pe(T),pe(y),pe(i),pe(m),p(100),d(E)};if(g=b,f(),x=g.size>a,I=g.size>C.size,!x&&!I)return p(100),d(g);var F;return v=C.size,P=g.size,R=P,M=i,l=!j.alwaysKeepResolution&&x,(F=function(N){for(;N;){if(N.then)return void N.then(F,e);try{if(N.pop){if(N.length)return N.pop()?o.call(this):N;N=c}else N=N.call(this)}catch(U){return e(U)}}}.bind(this))(c)}}catch(c){return e(c)}}.bind(this),e)}catch(b){return e(b)}}.bind(this),e)}catch(_){return e(_)}}.bind(this),e)}catch(w){return e(w)}}.bind(this),e)}))}const yt=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let ze;function wt(C,j){return new Promise(((O,d)=>{ze||(ze=(function(u){const a=[];return a.push(u),URL.createObjectURL(new Blob(a))})(yt));const e=new Worker(ze);e.addEventListener("message",(function(u){if(j.signal&&j.signal.aborted)e.terminate();else if(u.data.progress===void 0){if(u.data.error)return d(new Error(u.data.error)),void e.terminate();O(u.data.file),e.terminate()}else j.onProgress(u.data.progress)})),e.addEventListener("error",d),j.signal&&j.signal.addEventListener("abort",(()=>{d(j.signal.reason),e.terminate()})),e.postMessage({file:C,imageCompressionLibUrl:j.libURL,options:{...j,onProgress:void 0,signal:void 0}})}))}function oe(C,j){return new Promise((function(O,d){let e,t,u,a,m,y;if(e={...j},u=0,{onProgress:a}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,m=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=s=>{u=s,typeof a=="function"&&a(u)},!(C instanceof Blob||C instanceof vt))return d(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(C.type))return d(new Error("The file given is not an image"));if(y=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!m||typeof Worker!="function"||y)return Ge(C,e).then(function(s){try{return t=s,r.call(this)}catch(g){return d(g)}}.bind(this),d);var n=function(){try{return r.call(this)}catch(s){return d(s)}}.bind(this),i=function(s){try{return Ge(C,e).then((function(g){try{return t=g,n()}catch(x){return d(x)}}),d)}catch(g){return d(g)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",wt(C,e).then((function(s){try{return t=s,n()}catch{return i()}}),i)}catch{i()}function r(){try{t.name=C.name,t.lastModified=C.lastModified}catch{}try{e.preserveExif&&C.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===C.type)&&(t=$e(C,t))}catch{}return O(t)}}))}oe.getDataUrlFromFile=Ve,oe.getFilefromDataUrl=Be,oe.loadImage=Ye,oe.drawImageInCanvas=et,oe.drawFileInCanvas=Pe,oe.canvasToFile=Oe,oe.getExifOrientation=tt,oe.handleMaxWidthOrHeight=rt,oe.followExifOrientation=nt,oe.cleanupCanvasMemory=pe,oe.isAutoOrientationInBrowser=je,oe.approximateBelowMaximumCanvasSizeOfBrowser=Je,oe.copyExifWithoutOrientation=$e,oe.getBrowserName=Ce,oe.version="2.0.2";function kt(){const{t:C}=lt(),[j,O]=Ae.useState(null),[d,e]=Ae.useState(null),[t,u]=Ae.useState(!1),[a,m]=Ae.useState(.8),[y,n]=Ae.useState(!1),[i,r]=Ae.useState(1920),[s,g]=Ae.useState(0),[x,I]=Ae.useState(0),v=h=>{if(h.length>0){const M=h[0];O(M),e(null);const l=new Image;l.onload=()=>{g(l.width),I(l.height),r(l.width)},l.src=URL.createObjectURL(M)}},P=async()=>{if(j){u(!0);try{const h={useWebWorker:!0,initialQuality:a};if(y)if(x>s){const f=x/s,p=Math.round(i*f);h.maxWidthOrHeight=p}else h.maxWidthOrHeight=i;const M=await oe(j,h);e(M)}catch(h){console.error("Error compressing image:",h),alert(C("tools_ui.image_compressor.error_alert")||"Failed to compress image.")}finally{u(!1)}}},R=()=>{!d||!j||at.saveAs(d,`compressed-${j.name}`)},E=h=>(h/1024/1024).toFixed(2)+" MB",T=()=>{if(!j||!d)return 0;const h=(j.size-d.size)/j.size*100;return Math.max(0,h).toFixed(0)};return z.jsxs("div",{className:"max-w-5xl mx-auto",children:[!j&&z.jsx(st,{onFilesSelected:v,accept:{"image/*":[".png",".jpg",".jpeg",".webp"]},multiple:!1}),j&&z.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[z.jsx("div",{className:"space-y-6",children:d?z.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[z.jsxs("div",{className:"p-6 rounded-xl bg-green-50 border border-green-200 text-center space-y-3",children:[z.jsx("div",{className:"inline-flex p-3 rounded-full bg-green-100 text-green-600 mb-2",children:z.jsx(ft,{className:"w-8 h-8"})}),z.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:C("tools_ui.image_compressor.success_title")}),z.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm bg-white py-2 rounded-lg border border-green-100 mx-4",children:[z.jsxs("span",{className:"text-gray-600",children:[C("tools_ui.image_compressor.new_size")," ",z.jsx("span",{className:"text-gray-900 font-mono font-bold",children:E(d.size)})]}),z.jsxs("span",{className:"text-green-600 font-bold bg-green-50 px-2 py-0.5 rounded",children:[C("tools_ui.image_compressor.saved")," ",T(),"%"]})]})]}),z.jsxs("button",{onClick:R,className:"w-full bg-gray-900 text-white hover:bg-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-gray-200 flex items-center justify-center gap-2 transition-all transform hover:-translate-y-0.5",children:[z.jsx(ct,{className:"w-5 h-5"}),C("tools_ui.image_compressor.download_button")]})]}):z.jsx("div",{className:"h-full min-h-75 rounded-2xl border-2 border-dashed border-gray-200 bg-gray-50 overflow-hidden",children:j&&z.jsxs("div",{className:"p-6 flex flex-col items-center justify-center h-full",children:[z.jsx("img",{src:URL.createObjectURL(j),alt:"Original preview",className:"max-w-full max-h-96 object-contain rounded-lg"}),z.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Original Image Preview"})]})})}),z.jsxs("div",{className:"space-y-6",children:[z.jsxs("div",{className:"p-6 rounded-xl bg-gray-50 border border-gray-200 space-y-6",children:[z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsx("h3",{className:"font-bold text-gray-900",children:C("tools_ui.image_compressor.settings")}),z.jsx("button",{onClick:()=>O(null),className:"text-sm text-gray-500 hover:text-gray-900 font-medium",children:C("tools_ui.image_compressor.change_file")})]}),z.jsxs("div",{className:"space-y-4",children:[z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsx("label",{className:"text-sm font-medium text-gray-700",children:C("tools_ui.image_compressor.quality_label")}),z.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[Math.round(a*100),"%"]})]}),z.jsx("input",{type:"range",min:"10",max:"100",step:"10",value:Math.round(a*100),onChange:h=>m(parseInt(h.target.value)/100),className:"w-full accent-blue-600 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),z.jsxs("div",{className:"flex justify-between text-xs text-gray-500 font-medium -mt-2",children:[z.jsxs("span",{children:["10%",z.jsx("br",{}),C("tools_ui.image_compressor.quality_heavy")]}),z.jsxs("span",{children:["30%",z.jsx("br",{}),C("tools_ui.image_compressor.quality_high")]}),z.jsxs("span",{children:["50%",z.jsx("br",{}),C("tools_ui.image_compressor.quality_medium")]}),z.jsxs("span",{children:["70%",z.jsx("br",{}),C("tools_ui.image_compressor.quality_low")]}),z.jsxs("span",{children:["100%",z.jsx("br",{}),C("tools_ui.image_compressor.quality_original")]})]}),z.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-xs text-blue-800",children:[z.jsx("p",{className:"font-semibold mb-1",children:C("tools_ui.image_compressor.quality_tip")}),z.jsx("p",{className:"text-blue-700",children:C("tools_ui.image_compressor.quality_recommendation")})]})]}),z.jsxs("div",{className:"space-y-3",children:[z.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[z.jsx("input",{type:"checkbox",checked:y,onChange:h=>n(h.target.checked),className:"w-4 h-4 accent-blue-600 cursor-pointer"}),z.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900",children:C("tools_ui.image_compressor.resize_label")})]}),y&&s>0&&z.jsxs("div",{className:"pl-7 space-y-2 animate-in fade-in slide-in-from-top-2",children:[z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsxs("label",{className:"text-xs text-gray-600",children:[C("tools_ui.image_compressor.target_width"),": ",i,"px"]}),z.jsxs("span",{className:"text-xs text-gray-500",children:["(",C("tools_ui.image_compressor.original_width"),": ",s,"px)"]})]}),z.jsx("input",{type:"range",min:"10",max:s,step:"10",value:i,onChange:h=>r(parseInt(h.target.value)),className:"w-full accent-blue-600 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),z.jsx("p",{className:"text-xs text-gray-500",children:C("tools_ui.image_compressor.aspect_ratio_note")})]})]}),z.jsx("button",{onClick:P,disabled:t,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-500/20",children:t?z.jsx(ut,{className:"animate-spin w-5 h-5"}):C("tools_ui.image_compressor.compress_button")})]}),z.jsx("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-200",children:z.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[z.jsx(dt,{className:"w-5 h-5 text-blue-500"}),z.jsxs("div",{className:"flex-1 min-w-0",children:[z.jsx("p",{className:"font-medium text-gray-900 truncate",children:j.name}),z.jsxs("p",{className:"text-sm text-gray-500",children:[C("tools_ui.image_compressor.original_width"),": ",E(j.size)]})]})]})})]})]})]})}export{kt as default};
