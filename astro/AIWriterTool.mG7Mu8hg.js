import{u as e,r as s,j as a}from"./vendor.Ml7xHclh.js";import{c as l}from"./utils.Ceoo1Swf.js";import{S as o,T as r,C as t,M as i,L as n}from"./lucide-icons.CJY1ueNI.js";function d(){const{t:d}=e(),[c,m]=s.useState(""),[x,u]=s.useState("professional"),[p,h]=s.useState("article"),[g,b]=s.useState(""),[f,j]=s.useState(!1),[y,w]=s.useState("checking"),[v,N]=s.useState("");s.useEffect(()=>{_()},[]);const _=async()=>{if(window.ai&&window.ai.languageModel)try{const e=await window.ai.languageModel.capabilities();"readily"===e.available?w("ready"):"after-download"===e.available?w("downloading"):w("unavailable")}catch(e){w("unavailable")}else w("unavailable")};return a.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"p-6 rounded-2xl bg-gray-50 border border-gray-200 space-y-6 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[a.jsx(o,{className:"w-5 h-5 text-purple-600"}),d("tools_ui.ai_writer_tool.title")]}),a.jsx("span",{className:l("text-xs font-medium px-2 py-1 rounded-full border","ready"===y?"bg-green-50 text-green-700 border-green-200":"unavailable"===y?"bg-red-50 text-red-700 border-red-200":"bg-yellow-50 text-yellow-700 border-yellow-200"),children:d("ready"===y?"tools_ui.common.model_ready":"checking"===y?"tools_ui.common.checking_cpu":"downloading"===y?"tools_ui.common.model_downloading":"tools_ui.common.browser_unsupported")})]}),"unavailable"===y?a.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-xl space-y-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx(r,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{className:"text-sm text-amber-800 space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:d("tools_ui.ai_writer_tool.offline_not_detected")}),a.jsxs("p",{children:["Status: ",window.ai?window.ai.languageModel?"Model capabilities check failed":"'languageModel' API missing":"'window.ai' is undefined (Flag disabled/Old Chrome)"]})]}),a.jsxs("div",{className:"bg-white/50 p-3 rounded-lg border border-amber-100",children:[a.jsx("p",{className:"font-bold mb-2",children:d("tools_ui.ai_writer_tool.troubleshooting")}),a.jsxs("ol",{className:"list-decimal pl-4 space-y-2 opacity-90",children:[a.jsx("li",{children:a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("span",{children:[a.jsx("b",{children:"Flags:"}),' Set to "Enabled":']}),a.jsx("div",{className:"flex items-center gap-1 bg-white px-2 py-0.5 rounded border border-gray-200 text-[10px] font-mono select-all",children:"chrome://flags/#prompt-api-for-gemini-nano"}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText("chrome://flags/#prompt-api-for-gemini-nano"),className:"p-1 hover:bg-black/5 rounded transition-colors",title:"Copy Link",children:a.jsx(t,{className:"w-3 h-3"})})]})}),a.jsxs("li",{children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[a.jsxs("span",{children:[a.jsx("b",{children:"Model Download:"})," Check update at:"]}),a.jsx("div",{className:"flex items-center gap-1 bg-white px-2 py-0.5 rounded border border-gray-200 text-[10px] font-mono select-all",children:"chrome://components"}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText("chrome://components"),className:"p-1 hover:bg-black/5 rounded transition-colors",title:"Copy Link",children:a.jsx(t,{className:"w-3 h-3"})})]}),a.jsxs("ul",{className:"list-disc pl-4 text-xs space-y-0.5 mt-1",children:[a.jsxs("li",{children:["Find ",a.jsx("b",{children:"Optimization Guide On Device Model"})]}),a.jsx("li",{children:'Click "Check for update"'}),a.jsxs("li",{children:["Wait until Version is not ",a.jsx("code",{children:"0.0.0.0"})]})]})]}),a.jsx("li",{className:"font-medium text-amber-900",children:"Restart Chrome completely after these steps."})]})]}),a.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-3 py-1.5 bg-amber-100 hover:bg-amber-200 text-amber-900 rounded-lg text-xs font-semibold transition-colors",children:[a.jsx(i,{className:"w-3 h-3"})," ",d("tools_ui.common.recheck")]})]})]})}):a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:d("tools_ui.ai_writer_tool.topic_label")}),a.jsx("textarea",{value:c,onChange:e=>m(e.target.value),placeholder:d("tools_ui.ai_writer_tool.topic_placeholder"),rows:4,className:"w-full bg-white border border-gray-200 rounded-xl px-4 py-3 text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all resize-none shadow-sm placeholder:text-gray-400"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:d("tools_ui.ai_writer_tool.type_label")}),a.jsx("div",{className:"relative",children:a.jsxs("select",{value:p,onChange:e=>h(e.target.value),className:"w-full bg-white border border-gray-200 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500 appearance-none shadow-sm cursor-pointer",children:[a.jsx("option",{value:"article",children:"Article"}),a.jsx("option",{value:"blog post",children:"Blog Post"}),a.jsx("option",{value:"email",children:"Email"}),a.jsx("option",{value:"social media caption",children:"Social Caption"}),a.jsx("option",{value:"story",children:"Story"})]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:d("tools_ui.ai_writer_tool.tone_label")}),a.jsx("div",{className:"relative",children:a.jsxs("select",{value:x,onChange:e=>u(e.target.value),className:"w-full bg-white border border-gray-200 rounded-lg px-4 py-2.5 text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500 appearance-none shadow-sm cursor-pointer",children:[a.jsx("option",{value:"professional",children:"Professional"}),a.jsx("option",{value:"casual",children:"Casual"}),a.jsx("option",{value:"enthusiastic",children:"Enthusiastic"}),a.jsx("option",{value:"informative",children:"Informative"}),a.jsx("option",{value:"funny",children:"Funny"})]})})]})]}),v&&a.jsx("div",{className:"p-3 bg-red-50 text-red-700 text-sm rounded-lg border border-red-100",children:v}),a.jsx("button",{onClick:async()=>{if(!c||"ready"!==y)return;let e;j(!0),b(""),N("");try{e=await window.ai.languageModel.create({systemPrompt:`You are a helpful AI writing assistant. user wants a ${x} ${p}.`});const s=`Write a ${x} ${p} about "${c}". Make it engaging and well-structured.`,a=await e.prompt(s);b(a)}catch(s){N(s.message||"Failed to generate content using offline model.")}finally{e&&e.destroy(),j(!1)}},disabled:f||!c||"ready"!==y,className:"w-full bg-linear-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white py-4 rounded-xl font-bold transition-all shadow-lg shadow-purple-500/20 flex items-center justify-center gap-2 transform active:scale-95 disabled:opacity-50 disabled:scale-100 disabled:cursor-not-allowed",children:f?a.jsxs(a.Fragment,{children:[a.jsx(n,{className:"animate-spin w-5 h-5"})," ",d("tools_ui.ai_writer_tool.generating")]}):a.jsxs(a.Fragment,{children:[a.jsx(i,{className:"w-5 h-5"})," ",d("tools_ui.ai_writer_tool.generate_button")]})})]})]})}),a.jsx("div",{className:"h-full min-h-125 flex flex-col",children:g?a.jsxs("div",{className:"flex-1 bg-white border border-gray-200 rounded-2xl overflow-hidden flex flex-col animate-in fade-in shadow-sm",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between bg-gray-50",children:[a.jsx("span",{className:"text-sm font-medium text-gray-500",children:d("tools_ui.common.offline_result")}),a.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(g)},className:"text-xs font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1.5 transition-colors bg-blue-50 px-3 py-1.5 rounded-full",children:[a.jsx(t,{className:"w-3.5 h-3.5"})," ",d("tools_ui.common.copy")]})]}),a.jsx("div",{className:"flex-1 p-8 overflow-y-auto custom-scrollbar bg-white",children:a.jsx("div",{className:"prose prose-gray max-w-none prose-headings:text-gray-900 prose-p:text-gray-600 prose-strong:text-gray-900",children:g.split("\n").map((e,s)=>a.jsx("p",{className:"mb-4",children:e},s))})})]}):a.jsx("div",{className:"flex-1 bg-gray-50 border-2 border-dashed border-gray-200 rounded-2xl flex items-center justify-center text-gray-400 p-8 text-center",children:a.jsxs("div",{children:[a.jsx(o,{className:"w-12 h-12 mx-auto mb-4 opacity-50 text-gray-300"}),a.jsx("p",{className:"font-medium text-gray-500",children:d("tools_ui.common.generated_content_placeholder")}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:d("tools_ui.common.runs_locally")})]})})})]})}export{d as default};
