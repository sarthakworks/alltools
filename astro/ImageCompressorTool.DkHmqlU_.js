import{u as e,r as s,j as a,E as t,F as r}from"./vendor.Ml7xHclh.js";import{F as l}from"./fileUploader.B1Dwo65Z.js";import"./i18n.BsxyfPkU.js";import{h as i,v as o,L as n,a0 as c}from"./lucide-icons.CJY1ueNI.js";import"./utils.Ceoo1Swf.js";function m(){const{t:m}=e(),[d,x]=s.useState(null),[u,g]=s.useState(null),[p,h]=s.useState(!1),[j,b]=s.useState(.8),[y,f]=s.useState(!1),[_,N]=s.useState(1920),[v,w]=s.useState(0),[S,k]=s.useState(0),q=e=>(e/1024/1024).toFixed(2)+" MB";return a.jsxs("div",{className:"max-w-5xl mx-auto",children:[!d&&a.jsx(l,{onFilesSelected:e=>{if(e.length>0){const s=e[0];x(s),g(null);const a=new Image;a.onload=()=>{w(a.width),k(a.height),N(a.width)},a.src=URL.createObjectURL(s)}},accept:{"image/*":[".png",".jpg",".jpeg",".webp"]},multiple:!1}),d&&a.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[a.jsx("div",{className:"space-y-6",children:u?a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[a.jsxs("div",{className:"p-6 rounded-xl bg-green-50 border border-green-200 text-center space-y-3",children:[a.jsx("div",{className:"inline-flex p-3 rounded-full bg-green-100 text-green-600 mb-2",children:a.jsx(i,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m("tools_ui.image_compressor.success_title")}),a.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm bg-white py-2 rounded-lg border border-green-100 mx-4",children:[a.jsxs("span",{className:"text-gray-600",children:[m("tools_ui.image_compressor.new_size")," ",a.jsx("span",{className:"text-gray-900 font-mono font-bold",children:q(u.size)})]}),a.jsxs("span",{className:"text-green-600 font-bold bg-green-50 px-2 py-0.5 rounded",children:[m("tools_ui.image_compressor.saved")," ",(()=>{if(!d||!u)return 0;const e=(d.size-u.size)/d.size*100;return Math.max(0,e).toFixed(0)})(),"%"]})]})]}),a.jsxs("button",{onClick:()=>{u&&d&&r.saveAs(u,`compressed-${d.name}`)},className:"w-full bg-gray-900 text-white hover:bg-black py-4 rounded-xl font-bold text-lg shadow-xl shadow-gray-200 flex items-center justify-center gap-2 transition-all transform hover:-translate-y-0.5",children:[a.jsx(o,{className:"w-5 h-5"}),m("tools_ui.image_compressor.download_button")]})]}):a.jsx("div",{className:"h-full min-h-75 rounded-2xl border-2 border-dashed border-gray-200 bg-gray-50 overflow-hidden",children:d&&a.jsxs("div",{className:"p-6 flex flex-col items-center justify-center h-full",children:[a.jsx("img",{src:URL.createObjectURL(d),alt:"Original preview",className:"max-w-full max-h-96 object-contain rounded-lg"}),a.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Original Image Preview"})]})})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-6 rounded-xl bg-gray-50 border border-gray-200 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-bold text-gray-900",children:m("tools_ui.image_compressor.settings")}),a.jsx("button",{onClick:()=>x(null),className:"text-sm text-gray-500 hover:text-gray-900 font-medium",children:m("tools_ui.image_compressor.change_file")})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:m("tools_ui.image_compressor.quality_label")}),a.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[Math.round(100*j),"%"]})]}),a.jsx("input",{type:"range",min:"10",max:"100",step:"10",value:Math.round(100*j),onChange:e=>b(parseInt(e.target.value)/100),className:"w-full accent-blue-600 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 font-medium -mt-2",children:[a.jsxs("span",{children:["10%",a.jsx("br",{}),m("tools_ui.image_compressor.quality_heavy")]}),a.jsxs("span",{children:["30%",a.jsx("br",{}),m("tools_ui.image_compressor.quality_high")]}),a.jsxs("span",{children:["50%",a.jsx("br",{}),m("tools_ui.image_compressor.quality_medium")]}),a.jsxs("span",{children:["70%",a.jsx("br",{}),m("tools_ui.image_compressor.quality_low")]}),a.jsxs("span",{children:["100%",a.jsx("br",{}),m("tools_ui.image_compressor.quality_original")]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-xs text-blue-800",children:[a.jsx("p",{className:"font-semibold mb-1",children:m("tools_ui.image_compressor.quality_tip")}),a.jsx("p",{className:"text-blue-700",children:m("tools_ui.image_compressor.quality_recommendation")})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:y,onChange:e=>f(e.target.checked),className:"w-4 h-4 accent-blue-600 cursor-pointer"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900",children:m("tools_ui.image_compressor.resize_label")})]}),y&&v>0&&a.jsxs("div",{className:"pl-7 space-y-2 animate-in fade-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"text-xs text-gray-600",children:[m("tools_ui.image_compressor.target_width"),": ",_,"px"]}),a.jsxs("span",{className:"text-xs text-gray-500",children:["(",m("tools_ui.image_compressor.original_width"),": ",v,"px)"]})]}),a.jsx("input",{type:"range",min:"10",max:v,step:"10",value:_,onChange:e=>N(parseInt(e.target.value)),className:"w-full accent-blue-600 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),a.jsx("p",{className:"text-xs text-gray-500",children:m("tools_ui.image_compressor.aspect_ratio_note")})]})]}),a.jsx("button",{onClick:async()=>{if(d){h(!0);try{const e={useWebWorker:!0,initialQuality:j};if(y)if(S>v){const s=S/v,a=Math.round(_*s);e.maxWidthOrHeight=a}else e.maxWidthOrHeight=_;const s=await t(d,e);g(s)}catch(e){alert(m("tools_ui.image_compressor.error_alert")||"Failed to compress image.")}finally{h(!1)}}},disabled:p,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold transition-colors flex items-center justify-center gap-2 shadow-lg shadow-blue-500/20",children:p?a.jsx(n,{className:"animate-spin w-5 h-5"}):m("tools_ui.image_compressor.compress_button")})]}),a.jsx("div",{className:"p-4 rounded-xl bg-gray-50 border border-gray-200",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(c,{className:"w-5 h-5 text-blue-500"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate",children:d.name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[m("tools_ui.image_compressor.original_width"),": ",q(d.size)]})]})]})})]})]})]})}export{m as default};
