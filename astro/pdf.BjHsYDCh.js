const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["astro/pdf-vendor.5vxXXNST.js","astro/vendor.Ml7xHclh.js"])))=>i.map(i=>d[i]);
import{r as e,_ as t}from"./vendor.Ml7xHclh.js";import{P as a}from"./pdf-vendor.5vxXXNST.js";function s({multiple:t=!0}={}){const[a,s]=e.useState([]),r=e.useRef([]),[o,i]=e.useState(!1),[n,c]=e.useState(0),[l,p]=e.useState(""),d=e.useCallback(e=>{s(e),r.current=e},[]);return{files:a,isProcessing:o,processingProgress:n,processingMessage:l,addFiles:e.useCallback(e=>{d(t?[...r.current,...e]:e.slice(0,1))},[t,d]),removeFile:e.useCallback(e=>{const t=r.current.filter((t,a)=>a!==e);d(t)},[d]),replaceFile:e.useCallback((e,t)=>{const a=[...r.current];a[e]=t,d(a)},[d]),reorderFiles:e.useCallback((e,t)=>{const a=[...r.current],[s]=a.splice(e,1);a.splice(t,0,s),d(a)},[d]),clearFiles:e.useCallback(()=>{d([])},[d]),setProcessingState:e.useCallback((e,t="",a=0)=>{i(e),p(t),c(a)},[]),filesRef:r}}const r=async()=>{const e=await t(()=>import("./pdf-vendor.5vxXXNST.js").then(e=>e.p),__vite__mapDeps([0,1]));if(!e.GlobalWorkerOptions.workerSrc){const t="/pdf.worker.min.mjs";e.GlobalWorkerOptions.workerSrc=t}},o=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},i=async(e,s="",o)=>{const i=await t(()=>import("./pdf-vendor.5vxXXNST.js").then(e=>e.p),__vite__mapDeps([0,1]));await r();const n=i.getDocument({data:new Uint8Array(e),password:s||void 0}),c=await n.promise,l=c.numPages,p=await a.create();for(let t=1;t<=l;t++){const e=await c.getPage(t),a=2,s=e.getViewport({scale:a}),r=e.getViewport({scale:1}),i=document.createElement("canvas"),n=i.getContext("2d");if(i.width=s.width,i.height=s.height,n){await e.render({canvasContext:n,viewport:s}).promise;const t=i.toDataURL("image/png"),a=await fetch(t).then(e=>e.arrayBuffer()),o=await p.embedPng(a);p.addPage([r.width,r.height]).drawImage(o,{x:0,y:0,width:r.width,height:r.height})}o&&o(Math.round(t/l*100))}return await p.save()},n=async(e,a,s=.5)=>{const o=await t(()=>import("./pdf-vendor.5vxXXNST.js").then(e=>e.p),__vite__mapDeps([0,1]));await r();const i=await e.arrayBuffer();let n;try{const e=o.getDocument({data:i});n=await e.promise}catch(l){if("PasswordException"!==l.name)throw l;{const e=o.getDocument({data:i,password:""});n=await e.promise}}const c=[];for(let t=1;t<=n.numPages;t++){const e=await n.getPage(t),r=e.getViewport({scale:s}),o=document.createElement("canvas"),i=o.getContext("2d");o.height=r.height,o.width=r.width,i&&(await e.render({canvasContext:i,viewport:r}).promise,c.push(o.toDataURL())),a&&a(t,n.numPages)}return c};export{o as f,n as g,r as i,i as p,s as u};
