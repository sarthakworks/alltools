import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as w}from"./index.BR1w_nJd.js";import{J as b}from"./jszip.min.CL8lVgXJ.js";import{F as N}from"./FileSaver.min.D-v3scGK.js";import{F as P}from"./fileUploader.e1Ms2KWN.js";import{u as F,f as C,g as S}from"./pdf.DIkd52Y_.js";import{P as A}from"./ProcessButton.CVFw6SxZ.js";import{I as D}from"./image.13c9b-WX.js";import{A as c}from"./arrow-down.BWPH-g_Y.js";import{L as $}from"./loader-circle.m7cZJHvs.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./_commonjs-dynamic-modules.TDtrdbi3.js";import"./index.BUxk5OiF.js";import"./createLucideIcon._FvKnKwF.js";import"./utils.DXMiVD0-.js";import"./preload-helper.BlTxHScW.js";function O(){const{files:r,addFiles:x,clearFiles:m,isProcessing:d,processingProgress:p,processingMessage:h,setProcessingState:o}=F({multiple:!1}),[t,l]=w.useState([]),g=r[0]||null,f=s=>{s.length>0&&(m(),l([]),x(s))},u=async()=>{if(g){l([]),o(!0,"Converting to images...",0);try{const s=await S(g,(a,i)=>{o(!0,`Converting page ${a}/${i}...`,Math.round(a/i*100))},2);l(s)}catch(s){console.error("Error converting PDF to images:",s),alert("Failed to convert PDF. Please try again.")}finally{o(!1)}}},j=async()=>{if(t.length===0)return;const s=new b;t.forEach((i,v)=>{const y=i.split(",")[1];s.file(`page-${v+1}.jpg`,y,{base64:!0})});const a=await s.generateAsync({type:"blob"});N.saveAs(a,"converted-images.zip")},n=r.length>0?r[r.length-1]:null;return e.jsx("div",{className:"max-w-4xl mx-auto",children:n?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gray-50 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.name}),e.jsx("p",{className:"text-xs text-gray-500",children:C(n.size)})]})]}),e.jsx("button",{onClick:()=>{m(),l([])},className:"text-sm text-gray-500 hover:text-gray-900 font-medium",children:"Change File"})]}),!t.length&&!d&&e.jsx("div",{className:"flex justify-center",children:e.jsx(A,{onClick:u,className:"w-full max-w-xs",isProcessing:!1,icon:c,processingMessage:"Start Conversion",children:"Start Conversion"})}),d&&e.jsxs("div",{className:"text-center space-y-3 py-8",children:[e.jsx($,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto"}),e.jsx("p",{className:"text-gray-600",children:h}),e.jsx("div",{className:"w-full max-w-md mx-auto h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${p}%`}})})]}),t.length>0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Converted Pages (",t.length,")"]}),e.jsxs("button",{onClick:j,className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2",children:[e.jsx(c,{className:"w-4 h-4"})," Download All (ZIP)"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:t.map((s,a)=>e.jsxs("div",{className:"relative group aspect-[1/1.4] rounded-lg overflow-hidden border border-gray-200 bg-gray-50 shadow-sm",children:[e.jsx("img",{src:s,alt:`Page ${a+1}`,className:"w-full h-full object-contain"}),e.jsx("a",{href:s,download:`page-${a+1}.jpg`,className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:e.jsx(c,{className:"w-8 h-8 text-white filter drop-shadow-md"})})]},a))})]})]}):e.jsx(P,{onFilesSelected:f,accept:{"application/pdf":[".pdf"]}})})}export{O as default};
