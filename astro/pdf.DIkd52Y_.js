import{r as n}from"./index.BR1w_nJd.js";import{_ as F}from"./preload-helper.BlTxHScW.js";import{a as b}from"./ProcessButton.CVFw6SxZ.js";function E({multiple:o=!0}={}){const[r,d]=n.useState([]),a=n.useRef([]),[h,c]=n.useState(!1),[p,s]=n.useState(0),[l,g]=n.useState(""),t=n.useCallback(e=>{d(e),a.current=e},[]),u=n.useCallback(e=>{if(!o){t(e.slice(0,1));return}t([...a.current,...e])},[o,t]),m=n.useCallback(e=>{const w=a.current.filter((i,v)=>v!==e);t(w)},[t]),f=n.useCallback((e,w)=>{const i=[...a.current];i[e]=w,t(i)},[t]),P=n.useCallback((e,w)=>{const i=[...a.current],[v]=i.splice(e,1);i.splice(w,0,v),t(i)},[t]),k=n.useCallback(()=>{t([])},[t]),_=n.useCallback((e,w="",i=0)=>{c(e),g(w),s(i)},[]);return{files:r,isProcessing:h,processingProgress:p,processingMessage:l,addFiles:u,removeFile:m,replaceFile:f,reorderFiles:P,clearFiles:k,setProcessingState:_,filesRef:a}}const D=async()=>{const o=await F(()=>import("./pdf.OfKI3oAY.js"),[]);if(!o.GlobalWorkerOptions.workerSrc){const r="/pdf.worker.min.mjs";o.GlobalWorkerOptions.workerSrc=r}},B=o=>{if(o===0)return"0 Bytes";const r=1024,d=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(o)/Math.log(r));return parseFloat((o/Math.pow(r,a)).toFixed(2))+" "+d[a]},S=async(o,r="",d)=>{const a=await F(()=>import("./pdf.OfKI3oAY.js"),[]);await D();const c=await a.getDocument({data:new Uint8Array(o),password:r||void 0}).promise,p=c.numPages,s=await b.create();for(let l=1;l<=p;l++){const g=await c.getPage(l),u=g.getViewport({scale:2}),m=g.getViewport({scale:1}),f=document.createElement("canvas"),P=f.getContext("2d");if(f.width=u.width,f.height=u.height,P){await g.render({canvasContext:P,viewport:u}).promise;const k=f.toDataURL("image/png"),_=await fetch(k).then(i=>i.arrayBuffer()),e=await s.embedPng(_);s.addPage([m.width,m.height]).drawImage(e,{x:0,y:0,width:m.width,height:m.height})}d&&d(Math.round(l/p*100))}return await s.save()},T=async(o,r,d=.5)=>{const a=await F(()=>import("./pdf.OfKI3oAY.js"),[]);await D();const h=await o.arrayBuffer();let c;try{c=await a.getDocument({data:h}).promise}catch(s){if(s.name==="PasswordException")c=await a.getDocument({data:h,password:""}).promise;else throw s}const p=[];for(let s=1;s<=c.numPages;s++){const l=await c.getPage(s),g=l.getViewport({scale:d}),t=document.createElement("canvas"),u=t.getContext("2d");t.height=g.height,t.width=g.width,u&&(await l.render({canvasContext:u,viewport:g}).promise,p.push(t.toDataURL())),r&&r(s,c.numPages)}return p};export{B as f,T as g,D as i,S as p,E as u};
